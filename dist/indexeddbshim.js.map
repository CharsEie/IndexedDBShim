{"version":3,"sources":["indexeddbshim.js"],"names":[],"mappings":"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","file":"indexeddbshim.js","sourcesContent":["var idbModules = {\r\n    util: {\r\n        cleanInterface: false\r\n    }\r\n};\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var testObject = {test: true};\r\n    //Test whether Object.defineProperty really works.\r\n    if (Object.defineProperty) {\r\n        try {\r\n            Object.defineProperty(testObject, 'test', { enumerable: false });\r\n            if (testObject.test) {\r\n                idbModules.util.cleanInterface = true;\r\n            }\r\n        } catch (e) {\r\n        //Object.defineProperty does not work as intended.\r\n        }\r\n    }\r\n})();\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    /**\r\n     * A utility method to callback onsuccess, onerror, etc as soon as the calling function's context is over\r\n     * @param {Object} fn\r\n     * @param {Object} context\r\n     * @param {Object} argArray\r\n     */\r\n    function callback(fn, context, event) {\r\n        //window.setTimeout(function(){\r\n        event.target = context;\r\n        (typeof context[fn] === \"function\") && context[fn].apply(context, [event]);\r\n        //}, 1);\r\n    }\r\n\r\n    /**\r\n     * Shim the DOMStringList object.\r\n     *\r\n     */\r\n    var StringList = function() {\r\n        this.length = 0;\r\n        this._items = [];\r\n        //Internal functions on the prototype have been made non-enumerable below.\r\n        if (idbModules.util.cleanInterface) {\r\n            Object.defineProperty(this, '_items', {\r\n                enumerable: false\r\n            });\r\n        }\r\n    };\r\n    StringList.prototype = {\r\n        // Interface.\r\n        contains: function(str) {\r\n            return -1 !== this._items.indexOf(str);\r\n        },\r\n        item: function(key) {\r\n            return this._items[key];\r\n        },\r\n\r\n        // Helpers. Should only be used internally.\r\n        indexOf: function(str) {\r\n            return this._items.indexOf(str);\r\n        },\r\n        push: function(item) {\r\n            this._items.push(item);\r\n            this.length += 1;\r\n            for (var i = 0; i < this._items.length; i++) {\r\n                this[i] = this._items[i];\r\n            }\r\n        },\r\n        splice: function(/*index, howmany, item1, ..., itemX*/) {\r\n            this._items.splice.apply(this._items, arguments);\r\n            this.length = this._items.length;\r\n            for (var i in this) {\r\n                if (i === String(parseInt(i, 10))) {\r\n                    delete this[i];\r\n                }\r\n            }\r\n            for (i = 0; i < this._items.length; i++) {\r\n                this[i] = this._items[i];\r\n            }\r\n        }\r\n    };\r\n    if (idbModules.util.cleanInterface) {\r\n        for (var i in {\r\n            'indexOf': false,\r\n            'push': false,\r\n            'splice': false\r\n        }) {\r\n            Object.defineProperty(StringList.prototype, i, {\r\n                enumerable: false\r\n            });\r\n        }\r\n    }\r\n\r\n    idbModules.util.callback = callback;\r\n    idbModules.util.StringList = StringList;\r\n    idbModules.util.quote = function(arg) {\r\n        return \"\\\"\" + arg + \"\\\"\";\r\n    };\r\n\r\n}(idbModules));\r\n\r\n(function (idbModules) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Polyfills missing features in the browser's native IndexedDB implementation.\r\n     * This is used for browsers that DON'T support WebSQL but DO support IndexedDB\r\n     */\r\n    function polyfill() {\r\n        if (navigator.userAgent.match(/MSIE/) ||\r\n            navigator.userAgent.match(/Trident/) ||\r\n            navigator.userAgent.match(/Edge/)) {\r\n            // Internet Explorer's native IndexedDB does not support compound keys\r\n            compoundKeyPolyfill();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Polyfills support for compound keys\r\n     */\r\n    function compoundKeyPolyfill() {\r\n        var cmp = IDBFactory.prototype.cmp;\r\n        var createObjectStore = IDBDatabase.prototype.createObjectStore;\r\n        var createIndex = IDBObjectStore.prototype.createIndex;\r\n        var add = IDBObjectStore.prototype.add;\r\n        var put = IDBObjectStore.prototype.put;\r\n        var indexGet = IDBIndex.prototype.get;\r\n        var indexGetKey = IDBIndex.prototype.getKey;\r\n        var indexCursor = IDBIndex.prototype.openCursor;\r\n        var indexKeyCursor = IDBIndex.prototype.openKeyCursor;\r\n        var storeGet = IDBObjectStore.prototype.get;\r\n        var storeDelete = IDBObjectStore.prototype.delete;\r\n        var storeCursor = IDBObjectStore.prototype.openCursor;\r\n        var storeKeyCursor = IDBObjectStore.prototype.openKeyCursor;\r\n        var bound = IDBKeyRange.bound;\r\n        var upperBound = IDBKeyRange.upperBound;\r\n        var lowerBound = IDBKeyRange.lowerBound;\r\n        var only = IDBKeyRange.only;\r\n        var requestResult = Object.getOwnPropertyDescriptor(IDBRequest.prototype, 'result');\r\n        var cursorPrimaryKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'primaryKey');\r\n        var cursorKey = Object.getOwnPropertyDescriptor(IDBCursor.prototype, 'key');\r\n        var cursorValue = Object.getOwnPropertyDescriptor(IDBCursorWithValue.prototype, 'value');\r\n\r\n        IDBFactory.prototype.cmp = function(key1, key2) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key1 instanceof Array) {\r\n                args[0] = encodeCompoundKey(key1);\r\n            }\r\n            if (key2 instanceof Array) {\r\n                args[1] = encodeCompoundKey(key2);\r\n            }\r\n            return cmp.apply(this, args);\r\n        };\r\n\r\n        IDBDatabase.prototype.createObjectStore = function(name, opts) {\r\n            if (opts && opts.keyPath instanceof Array) {\r\n                opts.keyPath = encodeCompoundKeyPath(opts.keyPath);\r\n            }\r\n            return createObjectStore.apply(this, arguments);\r\n        };\r\n\r\n        IDBObjectStore.prototype.createIndex = function(name, keyPath, opts) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (keyPath instanceof Array) {\r\n                args[1] = encodeCompoundKeyPath(keyPath);\r\n            }\r\n            return createIndex.apply(this, args);\r\n        };\r\n\r\n        IDBObjectStore.prototype.add = function(value, key) {\r\n            return this.__insertData(add, arguments);\r\n        };\r\n\r\n        IDBObjectStore.prototype.put = function(value, key) {\r\n            return this.__insertData(put, arguments);\r\n        };\r\n\r\n        IDBObjectStore.prototype.__insertData = function(method, args) {\r\n            args = Array.prototype.slice.call(args);\r\n            var value = args[0];\r\n            var key = args[1];\r\n\r\n            // out-of-line key\r\n            if (key instanceof Array) {\r\n                args[1] = encodeCompoundKey(key);\r\n            }\r\n\r\n            if (typeof value === 'object') {\r\n                // inline key\r\n                if (isCompoundKey(this.keyPath)) {\r\n                    setInlineCompoundKey(value, this.keyPath);\r\n                }\r\n\r\n                // inline indexes\r\n                for (var i = 0; i < this.indexNames.length; i++) {\r\n                    var index = this.index(this.indexNames[i]);\r\n                    if (isCompoundKey(index.keyPath)) {\r\n                        try {\r\n                            setInlineCompoundKey(value, index.keyPath);\r\n                        }\r\n                        catch (e) {\r\n                            // The value doesn't have a valid key for this index.\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return method.apply(this, args);\r\n        };\r\n\r\n        IDBIndex.prototype.get = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return indexGet.apply(this, args);\r\n        };\r\n\r\n        IDBIndex.prototype.getKey = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return indexGetKey.apply(this, args);\r\n        };\r\n\r\n        IDBIndex.prototype.openCursor = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return indexCursor.apply(this, args);\r\n        };\r\n\r\n        IDBIndex.prototype.openKeyCursor = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return indexKeyCursor.apply(this, args);\r\n        };\r\n\r\n        IDBObjectStore.prototype.get = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return storeGet.apply(this, args);\r\n        };\r\n\r\n        IDBObjectStore.prototype.delete = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return storeDelete.apply(this, args);\r\n        };\r\n\r\n        IDBObjectStore.prototype.openCursor = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return storeCursor.apply(this, args);\r\n        };\r\n\r\n        IDBObjectStore.prototype.openKeyCursor = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return storeKeyCursor.apply(this, args);\r\n        };\r\n\r\n        IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (lower instanceof Array) {\r\n                args[0] = encodeCompoundKey(lower);\r\n            }\r\n            if (upper instanceof Array) {\r\n                args[1] = encodeCompoundKey(upper);\r\n            }\r\n            return bound.apply(IDBKeyRange, args);\r\n        };\r\n\r\n        IDBKeyRange.upperBound = function(key, open) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return upperBound.apply(IDBKeyRange, args);\r\n        };\r\n\r\n        IDBKeyRange.lowerBound = function(key, open) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return lowerBound.apply(IDBKeyRange, args);\r\n        };\r\n\r\n        IDBKeyRange.only = function(key) {\r\n            var args = Array.prototype.slice.call(arguments);\r\n            if (key instanceof Array) {\r\n                args[0] = encodeCompoundKey(key);\r\n            }\r\n            return only.apply(IDBKeyRange, args);\r\n        };\r\n\r\n        Object.defineProperty(IDBRequest.prototype, 'result', {\r\n            enumerable: requestResult.enumerable,\r\n            configurable: requestResult.configurable,\r\n            get: function() {\r\n                var result = requestResult.get.call(this);\r\n                return removeInlineCompoundKey(result);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(IDBCursor.prototype, 'primaryKey', {\r\n            enumerable: cursorPrimaryKey.enumerable,\r\n            configurable: cursorPrimaryKey.configurable,\r\n            get: function() {\r\n                var result = cursorPrimaryKey.get.call(this);\r\n                return removeInlineCompoundKey(result);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(IDBCursor.prototype, 'key', {\r\n            enumerable: cursorKey.enumerable,\r\n            configurable: cursorKey.configurable,\r\n            get: function() {\r\n                var result = cursorKey.get.call(this);\r\n                return removeInlineCompoundKey(result);\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(IDBCursorWithValue.prototype, 'value', {\r\n            enumerable: cursorValue.enumerable,\r\n            configurable: cursorValue.configurable,\r\n            get: function() {\r\n                var result = cursorValue.get.call(this);\r\n                return removeInlineCompoundKey(result);\r\n            }\r\n        });\r\n\r\n        try {\r\n            if (!IDBTransaction.VERSION_CHANGE) {\r\n                IDBTransaction.VERSION_CHANGE = 'versionchange';\r\n            }\r\n        }\r\n        catch (e) {}\r\n    }\r\n\r\n    var compoundKeysPropertyName = '__$$compoundKey';\r\n    var propertySeparatorRegExp = /\\$\\$/g;\r\n    var propertySeparator = '$$$$';         // \"$$\" after RegExp escaping\r\n    var keySeparator = '$_$';\r\n\r\n    function isCompoundKey(keyPath) {\r\n        return keyPath && (keyPath.indexOf(compoundKeysPropertyName + '.') === 0);\r\n    }\r\n\r\n    function encodeCompoundKeyPath(keyPath) {\r\n        // Encoded dotted properties\r\n        // [\"name.first\", \"name.last\"] ==> [\"name$$first\", \"name$$last\"]\r\n        for (var i = 0; i < keyPath.length; i++) {\r\n            keyPath[i] = keyPath[i].replace(/\\./g, propertySeparator);\r\n        }\r\n\r\n        // Encode the array as a single property\r\n        // [\"name$$first\", \"name$$last\"] => \"__$$compoundKey.name$$first$_$name$$last\"\r\n        return compoundKeysPropertyName + '.' + keyPath.join(keySeparator);\r\n    }\r\n\r\n    function decodeCompoundKeyPath(keyPath) {\r\n        // Remove the \"__$$compoundKey.\" prefix\r\n        keyPath = keyPath.substr(compoundKeysPropertyName.length + 1);\r\n\r\n        // Split the properties into an array\r\n        // \"name$$first$_$name$$last\" ==> [\"name$$first\", \"name$$last\"]\r\n        keyPath = keyPath.split(keySeparator);\r\n\r\n        // Decode dotted properties\r\n        // [\"name$$first\", \"name$$last\"] ==> [\"name.first\", \"name.last\"]\r\n        for (var i = 0; i < keyPath.length; i++) {\r\n            keyPath[i] = keyPath[i].replace(propertySeparatorRegExp, '.');\r\n        }\r\n        return keyPath;\r\n    }\r\n\r\n    function setInlineCompoundKey(value, encodedKeyPath) {\r\n        // Encode the key\r\n        var keyPath = decodeCompoundKeyPath(encodedKeyPath);\r\n        var key = idbModules.Key.getValue(value, keyPath);\r\n        var encodedKey = encodeCompoundKey(key);\r\n\r\n        // Store the encoded key inline\r\n        encodedKeyPath = encodedKeyPath.substr(compoundKeysPropertyName.length + 1);\r\n        value[compoundKeysPropertyName] = value[compoundKeysPropertyName] || {};\r\n        value[compoundKeysPropertyName][encodedKeyPath] = encodedKey;\r\n    }\r\n\r\n    function removeInlineCompoundKey(value) {\r\n        if (typeof value === \"string\" && isCompoundKey(value)) {\r\n            return decodeCompoundKey(value);\r\n        }\r\n        else if (value && typeof value[compoundKeysPropertyName] === \"object\") {\r\n            delete value[compoundKeysPropertyName];\r\n        }\r\n        return value;\r\n    }\r\n\r\n    function encodeCompoundKey(key) {\r\n        // Validate and encode the key\r\n        idbModules.Key.validate(key);\r\n        key = idbModules.Key.encode(key);\r\n\r\n        // Prepend the \"__$$compoundKey.\" prefix\r\n        key = compoundKeysPropertyName + '.' + key;\r\n\r\n        validateKeyLength(key);\r\n        return key;\r\n    }\r\n\r\n    function decodeCompoundKey(key) {\r\n        validateKeyLength(key);\r\n\r\n        // Remove the \"__$$compoundKey.\" prefix\r\n        key = key.substr(compoundKeysPropertyName.length + 1);\r\n\r\n        // Decode the key\r\n        key = idbModules.Key.decode(key);\r\n        return key;\r\n    }\r\n\r\n    function validateKeyLength(key) {\r\n        // BUG: Internet Explorer truncates string keys at 889 characters\r\n        if (key.length > 889) {\r\n            throw idbModules.util.createDOMException(\"DataError\", \"The encoded key is \" + key.length + \" characters long, but IE only allows 889 characters. Consider replacing numeric keys with strings to reduce the encoded length.\");\r\n        }\r\n    }\r\n\r\n    idbModules.polyfill = polyfill;\r\n})(idbModules);\r\n\r\n/*eslint-disable no-eval*/\r\nimport atob from 'atob';\r\n\r\n(function(idbModules){\r\n    'use strict';\r\n\r\n    /**\r\n     * Implementation of the Structured Cloning Algorithm.  Supports the\r\n     * following object types:\r\n     * - Blob\r\n     * - Boolean\r\n     * - Date object\r\n     * - File object (deserialized as Blob object).\r\n     * - Number object\r\n     * - RegExp object\r\n     * - String object\r\n     * This is accomplished by doing the following:\r\n     * 1) Using the cycle/decycle functions from:\r\n     *    https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\r\n     * 2) Serializing/deserializing objects to/from string that don't work with\r\n     *    JSON.stringify and JSON.parse by using object specific logic (eg use\r\n     *    the FileReader API to convert a Blob or File object to a data URL.\r\n     * 3) JSON.stringify and JSON.parse do the final conversion to/from string.\r\n     */\r\n    var Sca = (function(){\r\n        return {\r\n            decycle: function(object, callback) {\r\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\r\n                // Contains additional logic to convert the following object types to string\r\n                // so that they can properly be encoded using JSON.stringify:\r\n                //  *Boolean\r\n                //  *Date\r\n                //  *File\r\n                //  *Blob\r\n                //  *Number\r\n                //  *Regex\r\n                // Make a deep copy of an object or array, assuring that there is at most\r\n                // one instance of each object or array in the resulting structure. The\r\n                // duplicate references (which might be forming cycles) are replaced with\r\n                // an object of the form\r\n                //      {$ref: PATH}\r\n                // where the PATH is a JSONPath string that locates the first occurance.\r\n                // So,\r\n                //      var a = [];\r\n                //      a[0] = a;\r\n                //      return JSON.stringify(JSON.decycle(a));\r\n                // produces the string '[{\"$ref\":\"$\"}]'.\r\n\r\n                // JSONPath is used to locate the unique object. $ indicates the top level of\r\n                // the object or array. [NUMBER] or [STRING] indicates a child member or\r\n                // property.\r\n\r\n                var derezObj,\r\n                objects = [],   // Keep a reference to each unique object or array\r\n                paths = [],     // Keep the path to each unique object or array\r\n                queuedObjects = [],\r\n                returnCallback = callback;\r\n\r\n                /**\r\n                 * Check the queue to see if all objects have been processed.\r\n                 * if they have, call the callback with the converted object.\r\n                 */\r\n                function checkForCompletion() {\r\n                    if (queuedObjects.length === 0) {\r\n                        returnCallback(derezObj);\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Convert a blob to a data URL.\r\n                 * @param {Blob} blob to convert.\r\n                 * @param {String} path of blob in object being encoded.\r\n                 */\r\n                function readBlobAsDataURL(blob, path) {\r\n                    var reader = new FileReader();\r\n                    reader.onloadend = function(loadedEvent) {\r\n                        var dataURL = loadedEvent.target.result;\r\n                        var blobtype = 'Blob';\r\n                        if (blob instanceof File) {\r\n                            //blobtype = 'File';\r\n                        }\r\n                        updateEncodedBlob(dataURL, path, blobtype);\r\n                    };\r\n                    reader.readAsDataURL(blob);\r\n                }\r\n\r\n                /**\r\n                 * Async handler to update a blob object to a data URL for encoding.\r\n                 * @param {String} dataURL\r\n                 * @param {String} path\r\n                 * @param {String} blobtype - file if the blob is a file; blob otherwise\r\n                 */\r\n                function updateEncodedBlob(dataURL, path, blobtype) {\r\n                    var encoded = queuedObjects.indexOf(path);\r\n                    path = path.replace('$','derezObj');\r\n                    eval(path+'.$enc=\"'+dataURL+'\"');\r\n                    eval(path+'.$type=\"'+blobtype+'\"');\r\n                    queuedObjects.splice(encoded, 1);\r\n                    checkForCompletion();\r\n                }\r\n\r\n                function derez(value, path) {\r\n\r\n                    // The derez recurses through the object, producing the deep copy.\r\n\r\n                    var i,          // The loop counter\r\n                    name,       // Property name\r\n                    nu;         // The new object or array\r\n\r\n                    // typeof null === 'object', so go on if this value is really an object but not\r\n                    // one of the weird builtin objects.\r\n\r\n                    if (typeof value === 'object' && value !== null &&\r\n                        !(value instanceof Boolean) &&\r\n                        !(value instanceof Date)    &&\r\n                        !(value instanceof Number)  &&\r\n                        !(value instanceof RegExp)  &&\r\n                        !(value instanceof Blob)  &&\r\n                        !(value instanceof String)) {\r\n\r\n                        // If the value is an object or array, look to see if we have already\r\n                        // encountered it. If so, return a $ref/path object. This is a hard way,\r\n                        // linear search that will get slower as the number of unique objects grows.\r\n\r\n                        for (i = 0; i < objects.length; i += 1) {\r\n                            if (objects[i] === value) {\r\n                                return {$ref: paths[i]};\r\n                            }\r\n                        }\r\n\r\n                        // Otherwise, accumulate the unique value and its path.\r\n\r\n                        objects.push(value);\r\n                        paths.push(path);\r\n\r\n                        // If it is an array, replicate the array.\r\n\r\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                            nu = [];\r\n                            for (i = 0; i < value.length; i += 1) {\r\n                                nu[i] = derez(value[i], path + '[' + i + ']');\r\n                            }\r\n                        } else {\r\n                            // If it is an object, replicate the object.\r\n                            nu = {};\r\n                            for (name in value) {\r\n                                if (Object.prototype.hasOwnProperty.call(value, name)) {\r\n                                    nu[name] = derez(value[name],\r\n                                     path + '[' + JSON.stringify(name) + ']');\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        return nu;\r\n                    } else if (value instanceof Blob) {\r\n                        //Queue blob for conversion\r\n                        queuedObjects.push(path);\r\n                        readBlobAsDataURL(value, path);\r\n                    } else if (value instanceof Boolean) {\r\n                        value = {\r\n                            '$type': 'Boolean',\r\n                            '$enc': value.toString()\r\n                        };\r\n                    } else if (value instanceof Date) {\r\n                        value = {\r\n                            '$type': 'Date',\r\n                            '$enc': value.getTime()\r\n                        };\r\n                    } else if (value instanceof Number) {\r\n                        value = {\r\n                            '$type': 'Number',\r\n                            '$enc': value.toString()\r\n                        };\r\n                    } else if (value instanceof RegExp) {\r\n                        value = {\r\n                            '$type': 'RegExp',\r\n                            '$enc': value.toString()\r\n                        };\r\n                    } else if (typeof value === 'number') {\r\n                        value = {\r\n                            '$type': 'number',\r\n                            '$enc': value + ''  // handles NaN, Infinity, Negative Infinity\r\n                        };\r\n                    } else if (value === undefined) {\r\n                        value = {\r\n                            '$type': 'undefined'\r\n                        };\r\n                    }\r\n                    return value;\r\n                }\r\n                derezObj = derez(object, '$');\r\n                checkForCompletion();\r\n            },\r\n\r\n            retrocycle: function retrocycle($) {\r\n                //From: https://github.com/douglascrockford/JSON-js/blob/master/cycle.js\r\n                // Contains additional logic to convert strings to the following object types\r\n                // so that they can properly be decoded:\r\n                //  *Boolean\r\n                //  *Date\r\n                //  *File\r\n                //  *Blob\r\n                //  *Number\r\n                //  *Regex\r\n                // Restore an object that was reduced by decycle. Members whose values are\r\n                // objects of the form\r\n                //      {$ref: PATH}\r\n                // are replaced with references to the value found by the PATH. This will\r\n                // restore cycles. The object will be mutated.\r\n\r\n                // The eval function is used to locate the values described by a PATH. The\r\n                // root object is kept in a $ variable. A regular expression is used to\r\n                // assure that the PATH is extremely well formed. The regexp contains nested\r\n                // * quantifiers. That has been known to have extremely bad performance\r\n                // problems on some browsers for very long strings. A PATH is expected to be\r\n                // reasonably short. A PATH is allowed to belong to a very restricted subset of\r\n                // Goessner's JSONPath.\r\n\r\n                // So,\r\n                //      var s = '[{\"$ref\":\"$\"}]';\r\n                //      return JSON.retrocycle(JSON.parse(s));\r\n                // produces an array containing a single element which is the array itself.\r\n\r\n                var px = /^\\$(?:\\[(?:\\d+|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n                /**\r\n                 * Converts the specified data URL to a Blob object\r\n                 * @param {String} dataURL to convert to a Blob\r\n                 * @returns {Blob} the converted Blob object\r\n                 */\r\n                function dataURLToBlob(dataURL) {\r\n                    var BASE64_MARKER = ';base64,',\r\n                        contentType,\r\n                        parts,\r\n                        raw;\r\n                    if (dataURL.indexOf(BASE64_MARKER) === -1) {\r\n                        parts = dataURL.split(',');\r\n                        contentType = parts[0].split(':')[1];\r\n                        raw = parts[1];\r\n\r\n                        return new Blob([raw], {type: contentType});\r\n                    }\r\n\r\n                    parts = dataURL.split(BASE64_MARKER);\r\n                    contentType = parts[0].split(':')[1];\r\n                    raw = atob(parts[1]);\r\n                    var rawLength = raw.length;\r\n                    var uInt8Array = new Uint8Array(rawLength);\r\n\r\n                    for (var i = 0; i < rawLength; ++i) {\r\n                        uInt8Array[i] = raw.charCodeAt(i);\r\n                    }\r\n                    return new Blob([uInt8Array.buffer], {type: contentType});\r\n                }\r\n\r\n                function rez(value) {\r\n                    // The rez function walks recursively through the object looking for $ref\r\n                    // properties. When it finds one that has a value that is a path, then it\r\n                    // replaces the $ref object with a reference to the value that is found by\r\n                    // the path.\r\n\r\n                    var i, item, name, path;\r\n\r\n                    if (value && typeof value === 'object') {\r\n                        if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                            for (i = 0; i < value.length; i += 1) {\r\n                                item = value[i];\r\n                                if (item && typeof item === 'object') {\r\n                                    path = item.$ref;\r\n                                    if (typeof path === 'string' && px.test(path)) {\r\n                                        value[i] = eval(path);\r\n                                    } else {\r\n                                        value[i] = rez(item);\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (value.$type !== undefined) {\r\n                                switch(value.$type) {\r\n                                    case 'Blob':\r\n                                    case 'File':\r\n                                        value = dataURLToBlob(value.$enc);\r\n                                        break;\r\n                                    case 'Boolean':\r\n                                        value = Boolean(value.$enc === 'true');\r\n                                        break;\r\n                                    case 'Date':\r\n                                        value = new Date(value.$enc);\r\n                                        break;\r\n                                    case 'Number':\r\n                                        value = Number(value.$enc);\r\n                                        break;\r\n                                    case 'RegExp':\r\n                                        value = eval(value.$enc);\r\n                                        break;\r\n                                    case 'number':\r\n                                        value = parseFloat(value.$enc);\r\n                                        break;\r\n                                    case 'undefined':\r\n                                        value = undefined;\r\n                                        break;\r\n                                }\r\n                            } else {\r\n                                for (name in value) {\r\n                                    if (typeof value[name] === 'object') {\r\n                                        item = value[name];\r\n                                        if (item) {\r\n                                            path = item.$ref;\r\n                                            if (typeof path === 'string' && px.test(path)) {\r\n                                                value[name] = eval(path);\r\n                                            } else {\r\n                                                value[name] = rez(item);\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    return value;\r\n                }\r\n                return rez($);\r\n\r\n            },\r\n\r\n            /**\r\n             * Encode the specified object as a string.  Because of the asynchronus\r\n             * conversion of Blob/File to string, the encode function requires\r\n             * a callback\r\n             * @param {Object} val the value to convert.\r\n             * @param {function} callback the function to call once conversion is\r\n             * complete.  The callback gets called with the converted value.\r\n             */\r\n            \"encode\": function(val, callback){\r\n                function finishEncode(val) {\r\n                    callback(JSON.stringify(val));\r\n                }\r\n                this.decycle(val, finishEncode);\r\n            },\r\n\r\n            /**\r\n             * Deserialize the specified string to an object\r\n             * @param {String} val the serialized string\r\n             * @returns {Object} the deserialized object\r\n             */\r\n            \"decode\": function(val){\r\n                return this.retrocycle(JSON.parse(val));\r\n            }\r\n        };\r\n    }());\r\n    idbModules.Sca = Sca;\r\n}(idbModules));\r\n\r\n/*eslint-disable no-eval*/\r\n(function(idbModules) {\r\n    \"use strict\";\r\n\r\n    /**\r\n     * Encodes the keys based on their types. This is required to maintain collations\r\n     */\r\n    var collations = [\"undefined\", \"number\", \"date\", \"string\", \"array\"];\r\n\r\n    /**\r\n     * The sign values for numbers, ordered from least to greatest.\r\n     *  - \"negativeInfinity\": Sorts below all other values.\r\n     *  - \"bigNegative\": Negative values less than or equal to negative one.\r\n     *  - \"smallNegative\": Negative values between negative one and zero, noninclusive.\r\n     *  - \"smallPositive\": Positive values between zero and one, including zero but not one.\r\n     *  - \"largePositive\": Positive values greater than or equal to one.\r\n     *  - \"positiveInfinity\": Sorts above all other values.\r\n     */\r\n    var signValues = [\"negativeInfinity\", \"bigNegative\", \"smallNegative\", \"smallPositive\", \"bigPositive\", \"positiveInfinity\"];\r\n\r\n    var types = {\r\n        // Undefined is not a valid key type.  It's only used when there is no key.\r\n        undefined: {\r\n            encode: function(key) {\r\n                return collations.indexOf(\"undefined\") + \"-\";\r\n            },\r\n            decode: function(key) {\r\n                return undefined;\r\n            }\r\n        },\r\n\r\n        // Dates are encoded as ISO 8601 strings, in UTC time zone.\r\n        date: {\r\n            encode: function(key) {\r\n                return collations.indexOf(\"date\") + \"-\" + key.toJSON();\r\n            },\r\n            decode: function(key) {\r\n                return new Date(key.substring(2));\r\n            }\r\n        },\r\n\r\n        // Numbers are represented in a lexically sortable base-32 sign-exponent-mantissa\r\n        // notation.\r\n        //\r\n        // sign: takes a value between zero and five, inclusive. Represents infinite cases\r\n        //     and the signs of both the exponent and the fractional part of the number.\r\n        // exponent: paded to two base-32 digits, represented by the 32's compliment in the\r\n        //     \"smallPositive\" and \"bigNegative\" cases to ensure proper lexical sorting.\r\n        // mantissa: also called the fractional part. Normed 11-digit base-32 representation.\r\n        //     Represented by the 32's compliment in the \"smallNegative\" and \"bigNegative\"\r\n        //     cases to ensure proper lexical sorting.\r\n        number: {\r\n            // The encode step checks for six numeric cases and generates 14-digit encoded\r\n            // sign-exponent-mantissa strings.\r\n            encode: function(key) {\r\n                var key32 = Math.abs(key).toString(32);\r\n                // Get the index of the decimal.\r\n                var decimalIndex = key32.indexOf(\".\");\r\n                // Remove the decimal.\r\n                key32 = (decimalIndex !== -1) ? key32.replace(\".\", \"\") : key32;\r\n                // Get the index of the first significant digit.\r\n                var significantDigitIndex = key32.search(/[^0]/);\r\n                // Truncate leading zeros.\r\n                key32 = key32.slice(significantDigitIndex);\r\n                var sign, exponent = zeros(2), mantissa = zeros(11);\r\n\r\n                // Finite cases:\r\n                if (isFinite(key)) {\r\n                    // Negative cases:\r\n                    if (key < 0) {\r\n                        // Negative exponent case:\r\n                        if (key > -1) {\r\n                            sign = signValues.indexOf(\"smallNegative\");\r\n                            exponent = padBase32Exponent(significantDigitIndex);\r\n                            mantissa = flipBase32(padBase32Mantissa(key32));\r\n                        }\r\n                        // Non-negative exponent case:\r\n                        else {\r\n                            sign = signValues.indexOf(\"bigNegative\");\r\n                            exponent = flipBase32(padBase32Exponent(\r\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\r\n                            ));\r\n                            mantissa = flipBase32(padBase32Mantissa(key32));\r\n                        }\r\n                    }\r\n                    // Non-negative cases:\r\n                    else {\r\n                        // Negative exponent case:\r\n                        if (key < 1) {\r\n                            sign = signValues.indexOf(\"smallPositive\");\r\n                            exponent = flipBase32(padBase32Exponent(significantDigitIndex));\r\n                            mantissa = padBase32Mantissa(key32);\r\n                        }\r\n                        // Non-negative exponent case:\r\n                        else {\r\n                            sign = signValues.indexOf(\"bigPositive\");\r\n                            exponent = padBase32Exponent(\r\n                                (decimalIndex !== -1) ? decimalIndex : key32.length\r\n                            );\r\n                            mantissa = padBase32Mantissa(key32);\r\n                        }\r\n                    }\r\n                }\r\n                // Infinite cases:\r\n                else {\r\n                    sign = signValues.indexOf(\r\n                        key > 0 ? \"positiveInfinity\" : \"negativeInfinity\"\r\n                    );\r\n                }\r\n\r\n                return collations.indexOf(\"number\") + \"-\" + sign + exponent + mantissa;\r\n            },\r\n            // The decode step must interpret the sign, reflip values encoded as the 32's complements,\r\n            // apply signs to the exponent and mantissa, do the base-32 power operation, and return\r\n            // the original JavaScript number values.\r\n            decode: function(key) {\r\n                var sign = +key.substr(2, 1);\r\n                var exponent = key.substr(3, 2);\r\n                var mantissa = key.substr(5, 11);\r\n\r\n                switch (signValues[sign]) {\r\n                    case \"negativeInfinity\":\r\n                        return -Infinity;\r\n                    case \"positiveInfinity\":\r\n                        return Infinity;\r\n                    case \"bigPositive\":\r\n                        return pow32(mantissa, exponent);\r\n                    case \"smallPositive\":\r\n                        exponent = negate(flipBase32(exponent));\r\n                        return pow32(mantissa, exponent);\r\n                    case \"smallNegative\":\r\n                        exponent = negate(exponent);\r\n                        mantissa = flipBase32(mantissa);\r\n                        return -pow32(mantissa, exponent);\r\n                    case \"bigNegative\":\r\n                        exponent = flipBase32(exponent);\r\n                        mantissa = flipBase32(mantissa);\r\n                        return -pow32(mantissa, exponent);\r\n                    default:\r\n                        throw new Error(\"Invalid number.\");\r\n                }\r\n            }\r\n        },\r\n\r\n        // Strings are encoded as JSON strings (with quotes and unicode characters escaped).\r\n        //\r\n        // IF the strings are in an array, then some extra encoding is done to make sorting work correctly:\r\n        // Since we can't force all strings to be the same length, we need to ensure that characters line-up properly\r\n        // for sorting, while also accounting for the extra characters that are added when the array itself is encoded as JSON.\r\n        // To do this, each character of the string is prepended with a dash (\"-\"), and a space is added to the end of the string.\r\n        // This effectively doubles the size of every string, but it ensures that when two arrays of strings are compared,\r\n        // the indexes of each string's characters line up with each other.\r\n        string: {\r\n            encode: function(key, inArray) {\r\n                if (inArray) {\r\n                    // prepend each character with a dash, and append a space to the end\r\n                    key = key.replace(/(.)/g, '-$1') + ' ';\r\n                }\r\n                return collations.indexOf(\"string\") + \"-\" + key;\r\n            },\r\n            decode: function(key, inArray) {\r\n                key = key.substring(2);\r\n                if (inArray) {\r\n                    // remove the space at the end, and the dash before each character\r\n                    key = key.substr(0, key.length - 1).replace(/-(.)/g, '$1');\r\n                }\r\n                return key;\r\n            }\r\n        },\r\n\r\n        // Arrays are encoded as JSON strings.\r\n        // An extra, value is added to each array during encoding to make empty arrays sort correctly.\r\n        array: {\r\n            encode: function(key) {\r\n                var encoded = [];\r\n                for (var i = 0; i < key.length; i++) {\r\n                    var item = key[i];\r\n                    var encodedItem = idbModules.Key.encode(item, true);        // encode the array item\r\n                    encoded[i] = encodedItem;\r\n                }\r\n                encoded.push(collations.indexOf(\"undefined\") + \"-\");            // append an extra item, so empty arrays sort correctly\r\n                return collations.indexOf(\"array\") + \"-\" + JSON.stringify(encoded);\r\n            },\r\n            decode: function(key) {\r\n                var decoded = JSON.parse(key.substring(2));\r\n                decoded.pop();                                                  // remove the extra item\r\n                for (var i = 0; i < decoded.length; i++) {\r\n                    var item = decoded[i];\r\n                    var decodedItem = idbModules.Key.decode(item, true);        // decode the item\r\n                    decoded[i] = decodedItem;\r\n                }\r\n                return decoded;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Return a padded base-32 exponent value.\r\n     * @param {number}\r\n     * @return {string}\r\n     */\r\n    function padBase32Exponent(n) {\r\n        n = n.toString(32);\r\n        return (n.length === 1) ? \"0\" + n : n;\r\n    }\r\n\r\n    /**\r\n     * Return a padded base-32 mantissa.\r\n     * @param {string}\r\n     * @return {string}\r\n     */\r\n    function padBase32Mantissa(s) {\r\n        return (s + zeros(11)).slice(0, 11);\r\n    }\r\n\r\n    /**\r\n     * Flips each digit of a base-32 encoded string.\r\n     * @param {string} encoded\r\n     */\r\n    function flipBase32(encoded) {\r\n        var flipped = \"\";\r\n        for (var i = 0; i < encoded.length; i++) {\r\n            flipped += (31 - parseInt(encoded[i], 32)).toString(32);\r\n        }\r\n        return flipped;\r\n    }\r\n\r\n    /**\r\n     * Base-32 power function.\r\n     * RESEARCH: This function does not precisely decode floats because it performs\r\n     * floating point arithmetic to recover values. But can the original values be\r\n     * recovered exactly?\r\n     * Someone may have already figured out a good way to store JavaScript floats as\r\n     * binary strings and convert back. Barring a better method, however, one route\r\n     * may be to generate decimal strings that `parseFloat` decodes predictably.\r\n     * @param {string}\r\n     * @param {string}\r\n     * @return {number}\r\n     */\r\n    function pow32(mantissa, exponent) {\r\n        var whole, fraction, expansion;\r\n        exponent = parseInt(exponent, 32);\r\n        if (exponent < 0) {\r\n            return roundToPrecision(\r\n                parseInt(mantissa, 32) * Math.pow(32, exponent - 10)\r\n            );\r\n        }\r\n        else {\r\n            if (exponent < 11) {\r\n                whole = mantissa.slice(0, exponent);\r\n                whole = parseInt(whole, 32);\r\n                fraction = mantissa.slice(exponent);\r\n                fraction = parseInt(fraction, 32) * Math.pow(32, exponent - 11);\r\n                return roundToPrecision(whole + fraction);\r\n            }\r\n            else {\r\n                expansion = mantissa + zeros(exponent - 11);\r\n                return parseInt(expansion, 32);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    function roundToPrecision(num, precision) {\r\n        precision = precision || 16;\r\n        return parseFloat(num.toPrecision(precision));\r\n    }\r\n\r\n    /**\r\n     * Returns a string of n zeros.\r\n     * @param {number}\r\n     * @return {string}\r\n     */\r\n    function zeros(n) {\r\n        var result = \"\";\r\n        while (n--) {\r\n            result = result + \"0\";\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Negates numeric strings.\r\n     * @param {string}\r\n     * @return {string}\r\n     */\r\n    function negate(s) {\r\n        return \"-\" + s;\r\n    }\r\n\r\n    /**\r\n     * Returns the string \"number\", \"date\", \"string\", or \"array\".\r\n     */\r\n    function getType(key) {\r\n        if (key instanceof Date) {\r\n            return \"date\";\r\n        }\r\n        if (key instanceof Array) {\r\n            return \"array\";\r\n        }\r\n        return typeof key;\r\n    }\r\n\r\n    /**\r\n     * Keys must be strings, numbers, Dates, or Arrays\r\n     */\r\n    function validate(key) {\r\n        var type = getType(key);\r\n        if (type === \"array\") {\r\n            for (var i = 0; i < key.length; i++) {\r\n                validate(key[i]);\r\n            }\r\n        }\r\n        else if (!types[type] || (type !== \"string\" && isNaN(key))) {\r\n            throw idbModules.util.createDOMException(\"DataError\", \"Not a valid key\");\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Returns the value of an inline key\r\n     * @param {object} source\r\n     * @param {string|array} keyPath\r\n     */\r\n    function getValue(source, keyPath) {\r\n        try {\r\n            if (keyPath instanceof Array) {\r\n                var arrayValue = [];\r\n                for (var i = 0; i < keyPath.length; i++) {\r\n                    arrayValue.push(eval(\"source.\" + keyPath[i]));\r\n                }\r\n                return arrayValue;\r\n            } else {\r\n                return eval(\"source.\" + keyPath);\r\n            }\r\n        }\r\n        catch (e) {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Sets the inline key value\r\n     * @param {object} source\r\n     * @param {string} keyPath\r\n     * @param {*} value\r\n     */\r\n    function setValue(source, keyPath, value) {\r\n        var props = keyPath.split('.');\r\n        for (var i = 0; i < props.length - 1; i++) {\r\n            var prop = props[i];\r\n            source = source[prop] = source[prop] || {};\r\n        }\r\n        source[props[props.length - 1]] = value;\r\n    }\r\n\r\n    /**\r\n     * Determines whether an index entry matches a multi-entry key value.\r\n     * @param {string} encodedEntry     The entry value (already encoded)\r\n     * @param {string} encodedKey       The full index key (already encoded)\r\n     * @returns {boolean}\r\n     */\r\n    function isMultiEntryMatch(encodedEntry, encodedKey) {\r\n        var keyType = collations[encodedKey.substring(0, 1)];\r\n\r\n        if (keyType === \"array\") {\r\n            return encodedKey.indexOf(encodedEntry) > 1;\r\n        }\r\n        else {\r\n            return encodedKey === encodedEntry;\r\n        }\r\n    }\r\n\r\n    function isKeyInRange(key, range) {\r\n        var lowerMatch = range.lower === undefined;\r\n        var upperMatch = range.upper === undefined;\r\n        var encodedKey = idbModules.Key.encode(key, true);\r\n\r\n        if (range.lower !== undefined) {\r\n            if (range.lowerOpen && encodedKey > range.__lower) {\r\n                lowerMatch = true;\r\n            }\r\n            if (!range.lowerOpen && encodedKey >= range.__lower) {\r\n                lowerMatch = true;\r\n            }\r\n        }\r\n        if (range.upper !== undefined) {\r\n            if (range.upperOpen && encodedKey < range.__upper) {\r\n                upperMatch = true;\r\n            }\r\n            if (!range.upperOpen && encodedKey <= range.__upper) {\r\n                upperMatch = true;\r\n            }\r\n        }\r\n\r\n        return lowerMatch && upperMatch;\r\n    }\r\n\r\n    function findMultiEntryMatches(keyEntry, range) {\r\n        var matches = [];\r\n\r\n        if (keyEntry instanceof Array) {\r\n            for (var i = 0; i < keyEntry.length; i++) {\r\n                var key = keyEntry[i];\r\n\r\n                if (key instanceof Array) {\r\n                    if (range.lower === range.upper) {\r\n                        continue;\r\n                    }\r\n                    if (key.length === 1) {\r\n                        key = key[0];\r\n                    } else {\r\n                        var nested = findMultiEntryMatches(key, range);\r\n                        if (nested.length > 0) {\r\n                            matches.push(key);\r\n                        }\r\n                        continue;\r\n                    }\r\n                }\r\n\r\n                if (isKeyInRange(key, range)) {\r\n                    matches.push(key);\r\n                }\r\n            }\r\n        } else {\r\n            if (isKeyInRange(keyEntry, range)) {\r\n                matches.push(keyEntry);\r\n            }\r\n        }\r\n        return matches;\r\n    }\r\n\r\n    idbModules.Key = {\r\n        encode: function(key, inArray) {\r\n            if (key === undefined) {\r\n                return null;\r\n            }\r\n            return types[getType(key)].encode(key, inArray);\r\n        },\r\n        decode: function(key, inArray) {\r\n            if (typeof key !== \"string\") {\r\n                return undefined;\r\n            }\r\n            return types[collations[key.substring(0, 1)]].decode(key, inArray);\r\n        },\r\n        validate: validate,\r\n        getValue: getValue,\r\n        setValue: setValue,\r\n        isMultiEntryMatch: isMultiEntryMatch,\r\n        findMultiEntryMatches: findMultiEntryMatches\r\n    };\r\n}(idbModules));\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Creates a native Event object, for browsers that support it\r\n     * @returns {Event}\r\n     */\r\n    function createNativeEvent(type, debug) {\r\n        var event = new Event(type);\r\n        event.debug = debug;\r\n\r\n        // Make the \"target\" writable\r\n        Object.defineProperty(event, 'target', {\r\n            writable: true\r\n        });\r\n\r\n        return event;\r\n    }\r\n\r\n    /**\r\n     * A shim Event class, for browsers that don't allow us to create native Event objects.\r\n     * @constructor\r\n     */\r\n    function ShimEvent(type, debug) {\r\n        this.type = type;\r\n        this.debug = debug;\r\n        this.bubbles = false;\r\n        this.cancelable = false;\r\n        this.eventPhase = 0;\r\n        this.timeStamp = new Date().valueOf();\r\n    }\r\n\r\n    var useNativeEvent = false;\r\n    try {\r\n        // Test whether we can use the browser's native Event class\r\n        var test = createNativeEvent('test type', 'test debug');\r\n        var target = {test: 'test target'};\r\n        test.target = target;\r\n\r\n        if (test instanceof Event && test.type === 'test type' && test.debug === 'test debug' && test.target === target) {\r\n            // Native events work as expected\r\n            useNativeEvent = true;\r\n        }\r\n    }\r\n    catch (e) {}\r\n\r\n    if (useNativeEvent) {\r\n        idbModules.Event = Event;\r\n        idbModules.IDBVersionChangeEvent = Event;\r\n        idbModules.util.createEvent = createNativeEvent;\r\n    }\r\n    else {\r\n        idbModules.Event = ShimEvent;\r\n        idbModules.IDBVersionChangeEvent = ShimEvent;\r\n        idbModules.util.createEvent = function(type, debug) {\r\n            return new ShimEvent(type, debug);\r\n        };\r\n    }\r\n}(idbModules));\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Creates a native DOMException, for browsers that support it\r\n     * @returns {DOMException}\r\n     */\r\n    function createNativeDOMException(name, message) {\r\n        var e = new DOMException.prototype.constructor(0, message);\r\n        e.name = name || 'DOMException';\r\n        e.message = message;\r\n        return e;\r\n    }\r\n\r\n    /**\r\n     * Creates a native DOMError, for browsers that support it\r\n     * @returns {DOMError}\r\n     */\r\n    function createNativeDOMError(name, message) {\r\n        name = name || 'DOMError';\r\n        var e = new DOMError(name, message);\r\n        e.name === name || (e.name = name);\r\n        e.message === message || (e.message = message);\r\n        return e;\r\n    }\r\n\r\n    /**\r\n     * Creates a generic Error object\r\n     * @returns {Error}\r\n     */\r\n    function createError(name, message) {\r\n        var e = new Error(message);\r\n        e.name = name || 'DOMException';\r\n        e.message = message;\r\n        return e;\r\n    }\r\n\r\n    /**\r\n     * Logs detailed error information to the console.\r\n     * @param {string} name\r\n     * @param {string} message\r\n     * @param {string|Error|null} error\r\n     */\r\n    idbModules.util.logError = function(name, message, error) {\r\n        if (idbModules.DEBUG) {\r\n            if (error && error.message) {\r\n                error = error.message;\r\n            }\r\n\r\n            var method = typeof(console.error) === 'function' ? 'error' : 'log';\r\n            console[method](name + ': ' + message + '. ' + (error || ''));\r\n            console.trace && console.trace();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Finds the error argument.  This is useful because some WebSQL callbacks\r\n     * pass the error as the first argument, and some pass it as the second argument.\r\n     * @param {array} args\r\n     * @returns {Error|DOMException|undefined}\r\n     */\r\n    idbModules.util.findError = function(args) {\r\n        var err;\r\n        if (args) {\r\n            if (args.length === 1) {\r\n                return args[0];\r\n            }\r\n            for (var i = 0; i < args.length; i++) {\r\n                var arg = args[i];\r\n                if (arg instanceof Error || arg instanceof DOMException) {\r\n                    return arg;\r\n                }\r\n                else if (arg && typeof arg.message === \"string\") {\r\n                    err = arg;\r\n                }\r\n            }\r\n        }\r\n        return err;\r\n    };\r\n\r\n    var test, useNativeDOMException = false, useNativeDOMError = false;\r\n\r\n    // Test whether we can use the browser's native DOMException class\r\n    try {\r\n        test = createNativeDOMException('test name', 'test message');\r\n        if (test instanceof DOMException && test.name === 'test name' && test.message === 'test message') {\r\n            // Native DOMException works as expected\r\n            useNativeDOMException = true;\r\n        }\r\n    }\r\n    catch (e) {}\r\n\r\n    // Test whether we can use the browser's native DOMError class\r\n    try {\r\n        test = createNativeDOMError('test name', 'test message');\r\n        if (test instanceof DOMError && test.name === 'test name' && test.message === 'test message') {\r\n            // Native DOMError works as expected\r\n            useNativeDOMError = true;\r\n        }\r\n    }\r\n    catch (e) {}\r\n\r\n    if (useNativeDOMException) {\r\n        idbModules.DOMException = DOMException;\r\n        idbModules.util.createDOMException = function(name, message, error) {\r\n            idbModules.util.logError(name, message, error);\r\n            return createNativeDOMException(name, message);\r\n        };\r\n    }\r\n    else {\r\n        idbModules.DOMException = Error;\r\n        idbModules.util.createDOMException = function(name, message, error) {\r\n            idbModules.util.logError(name, message, error);\r\n            return createError(name, message);\r\n        };\r\n    }\r\n\r\n    if (useNativeDOMError) {\r\n        idbModules.DOMError = DOMError;\r\n        idbModules.util.createDOMError = function(name, message, error) {\r\n            idbModules.util.logError(name, message, error);\r\n            return createNativeDOMError(name, message);\r\n        };\r\n    }\r\n    else {\r\n        idbModules.DOMError = Error;\r\n        idbModules.util.createDOMError = function(name, message, error) {\r\n            idbModules.util.logError(name, message, error);\r\n            return createError(name, message);\r\n        };\r\n    }\r\n}(idbModules));\r\n\r\n(function(idbModules){\r\n    'use strict';\r\n\r\n    /**\r\n     * The IDBRequest Object that is returns for all async calls\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#request-api\r\n     */\r\n    function IDBRequest(){\r\n        this.onsuccess = this.onerror = this.result = this.error = this.source = this.transaction = null;\r\n        this.readyState = \"pending\";\r\n    }\r\n\r\n    /**\r\n     * The IDBOpenDBRequest called when a database is opened\r\n     */\r\n    function IDBOpenDBRequest(){\r\n        this.onblocked = this.onupgradeneeded = null;\r\n    }\r\n    IDBOpenDBRequest.prototype = new IDBRequest();\r\n    IDBOpenDBRequest.prototype.constructor = IDBOpenDBRequest;\r\n\r\n    idbModules.IDBRequest = IDBRequest;\r\n    idbModules.IDBOpenDBRequest = IDBOpenDBRequest;\r\n\r\n}(idbModules));\r\n\r\n(function(idbModules, undefined){\r\n    'use strict';\r\n\r\n    /**\r\n     * The IndexedDB KeyRange object\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#dfn-key-range\r\n     * @param {Object} lower\r\n     * @param {Object} upper\r\n     * @param {Object} lowerOpen\r\n     * @param {Object} upperOpen\r\n     */\r\n    function IDBKeyRange(lower, upper, lowerOpen, upperOpen){\r\n        if (lower !== undefined) {\r\n            idbModules.Key.validate(lower);\r\n        }\r\n        if (upper !== undefined) {\r\n            idbModules.Key.validate(upper);\r\n        }\r\n\r\n        this.lower = lower;\r\n        this.upper = upper;\r\n        this.lowerOpen = !!lowerOpen;\r\n        this.upperOpen = !!upperOpen;\r\n    }\r\n\r\n    IDBKeyRange.only = function(value){\r\n        return new IDBKeyRange(value, value, false, false);\r\n    };\r\n\r\n    IDBKeyRange.lowerBound = function(value, open){\r\n        return new IDBKeyRange(value, undefined, open, undefined);\r\n    };\r\n    IDBKeyRange.upperBound = function(value, open){\r\n        return new IDBKeyRange(undefined, value, undefined, open);\r\n    };\r\n    IDBKeyRange.bound = function(lower, upper, lowerOpen, upperOpen){\r\n        return new IDBKeyRange(lower, upper, lowerOpen, upperOpen);\r\n    };\r\n\r\n    idbModules.IDBKeyRange = IDBKeyRange;\r\n\r\n}(idbModules));\r\n\r\n(function(idbModules, undefined){\r\n    'use strict';\r\n\r\n    /**\r\n     * The IndexedDB Cursor Object\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBCursor\r\n     * @param {IDBKeyRange} range\r\n     * @param {string} direction\r\n     * @param {IDBObjectStore} store\r\n     * @param {IDBObjectStore|IDBIndex} source\r\n     * @param {string} keyColumnName\r\n     * @param {string} valueColumnName\r\n     * @param {boolean} count\r\n     */\r\n    function IDBCursor(range, direction, store, source, keyColumnName, valueColumnName, count){\r\n        // Calling openCursor on an index or objectstore with null is allowed but we treat it as undefined internally\r\n        if (range === null) {\r\n            range = undefined;\r\n        }\r\n        if (range !== undefined && !(range instanceof idbModules.IDBKeyRange)) {\r\n            range = new idbModules.IDBKeyRange(range, range, false, false);\r\n        }\r\n        store.transaction.__assertActive();\r\n        if (direction !== undefined && [\"next\", \"prev\", \"nextunique\", \"prevunique\"].indexOf(direction) === -1) {\r\n            throw new TypeError(direction + \"is not a valid cursor direction\");\r\n        }\r\n\r\n        this.source = source;\r\n        this.direction = direction || \"next\";\r\n        this.key = undefined;\r\n        this.primaryKey = undefined;\r\n        this.__store = store;\r\n        this.__range = range;\r\n        this.__req = new idbModules.IDBRequest();\r\n        this.__keyColumnName = keyColumnName;\r\n        this.__valueColumnName = valueColumnName;\r\n        this.__valueDecoder = valueColumnName === \"value\" ? idbModules.Sca : idbModules.Key;\r\n        this.__count = count;\r\n        this.__offset = -1; // Setting this to -1 as continue will set it to 0 anyway\r\n        this.__lastKeyContinued = undefined; // Used when continuing with a key\r\n        this.__multiEntryIndex = source instanceof idbModules.IDBIndex ? source.multiEntry : false;\r\n        this.__unique = this.direction.indexOf(\"unique\") !== -1;\r\n\r\n        if (range !== undefined) {\r\n            // Encode the key range and cache the encoded values, so we don't have to re-encode them over and over\r\n            range.__lower = range.lower !== undefined && idbModules.Key.encode(range.lower, this.__multiEntryIndex);\r\n            range.__upper = range.upper !== undefined && idbModules.Key.encode(range.upper, this.__multiEntryIndex);\r\n        }\r\n\r\n        this[\"continue\"]();\r\n    }\r\n\r\n    IDBCursor.prototype.__find = function (/* key, tx, success, error, recordsToLoad */) {\r\n        var args = Array.prototype.slice.call(arguments);\r\n        if (this.__multiEntryIndex) {\r\n            this.__findMultiEntry.apply(this, args);\r\n        } else {\r\n            this.__findBasic.apply(this, args);\r\n        }\r\n    };\r\n\r\n    IDBCursor.prototype.__findBasic = function (key, tx, success, error, recordsToLoad) {\r\n        recordsToLoad = recordsToLoad || 1;\r\n\r\n        var me = this;\r\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\r\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\r\n        var sqlValues = [];\r\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\r\n        if (me.__range && (me.__range.lower !== undefined || me.__range.upper !== undefined )) {\r\n            sql.push(\"AND\");\r\n            if (me.__range.lower !== undefined) {\r\n                sql.push(quotedKeyColumnName, (me.__range.lowerOpen ? \">\" : \">=\"), \"?\");\r\n                sqlValues.push(me.__range.__lower);\r\n            }\r\n            (me.__range.lower !== undefined && me.__range.upper !== undefined) && sql.push(\"AND\");\r\n            if (me.__range.upper !== undefined) {\r\n                sql.push(quotedKeyColumnName, (me.__range.upperOpen ? \"<\" : \"<=\"), \"?\");\r\n                sqlValues.push(me.__range.__upper);\r\n            }\r\n        }\r\n        if (typeof key !== \"undefined\") {\r\n            me.__lastKeyContinued = key;\r\n            me.__offset = 0;\r\n        }\r\n        if (me.__lastKeyContinued !== undefined) {\r\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\r\n            idbModules.Key.validate(me.__lastKeyContinued);\r\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\r\n        }\r\n\r\n        // Determine the ORDER BY direction based on the cursor.\r\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\r\n\r\n        if (!me.__count) {\r\n            sql.push(\"ORDER BY\", quotedKeyColumnName, direction);\r\n            sql.push(\"LIMIT\", recordsToLoad, \"OFFSET\", me.__offset);\r\n        }\r\n        sql = sql.join(\" \");\r\n        idbModules.DEBUG && console.log(sql, sqlValues);\r\n\r\n        me.__prefetchedData = null;\r\n        me.__prefetchedIndex = 0;\r\n        tx.executeSql(sql, sqlValues, function (tx, data) {\r\n            if (me.__count) {\r\n                success(undefined, data.rows.length, undefined);\r\n            }\r\n            else if (data.rows.length > 1) {\r\n                me.__prefetchedData = data.rows;\r\n                me.__prefetchedIndex = 0;\r\n                idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for cursor\");\r\n                me.__decode(data.rows.item(0), success);\r\n            }\r\n            else if (data.rows.length === 1) {\r\n                me.__decode(data.rows.item(0), success);\r\n            }\r\n            else {\r\n                idbModules.DEBUG && console.log(\"Reached end of cursors\");\r\n                success(undefined, undefined, undefined);\r\n            }\r\n        }, function (tx, err) {\r\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\r\n            error(err);\r\n        });\r\n    };\r\n\r\n    IDBCursor.prototype.__findMultiEntry = function (key, tx, success, error) {\r\n        var me = this;\r\n\r\n        if (me.__prefetchedData && me.__prefetchedData.length === me.__prefetchedIndex) {\r\n            idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\r\n            success(undefined, undefined, undefined);\r\n            return;\r\n        }\r\n\r\n        var quotedKeyColumnName = idbModules.util.quote(me.__keyColumnName);\r\n        var sql = [\"SELECT * FROM\", idbModules.util.quote(me.__store.name)];\r\n        var sqlValues = [];\r\n        sql.push(\"WHERE\", quotedKeyColumnName, \"NOT NULL\");\r\n        if (me.__range && (me.__range.lower !== undefined && me.__range.upper !== undefined)) {\r\n            if (me.__range.upper.indexOf(me.__range.lower) === 0) {\r\n                sql.push(\"AND\", quotedKeyColumnName, \"LIKE ?\");\r\n                sqlValues.push(\"%\" + me.__range.__lower.slice(0, -1) + \"%\");\r\n            }\r\n        }\r\n        if (typeof key !== \"undefined\") {\r\n            me.__lastKeyContinued = key;\r\n            me.__offset = 0;\r\n        }\r\n        if (me.__lastKeyContinued !== undefined) {\r\n            sql.push(\"AND\", quotedKeyColumnName, \">= ?\");\r\n            idbModules.Key.validate(me.__lastKeyContinued);\r\n            sqlValues.push(idbModules.Key.encode(me.__lastKeyContinued));\r\n        }\r\n\r\n        // Determine the ORDER BY direction based on the cursor.\r\n        var direction = me.direction === 'prev' || me.direction === 'prevunique' ? 'DESC' : 'ASC';\r\n\r\n        if (!me.__count) {\r\n            sql.push(\"ORDER BY key\", direction);\r\n        }\r\n        sql = sql.join(\" \");\r\n        idbModules.DEBUG && console.log(sql, sqlValues);\r\n\r\n        me.__prefetchedData = null;\r\n        me.__prefetchedIndex = 0;\r\n        tx.executeSql(sql, sqlValues, function (tx, data) {\r\n            me.__multiEntryOffset = data.rows.length;\r\n\r\n            if (data.rows.length > 0) {\r\n                var rows = [];\r\n\r\n                for (var i = 0; i < data.rows.length; i++) {\r\n                    var rowItem = data.rows.item(i);\r\n                    var rowKey = idbModules.Key.decode(rowItem[me.__keyColumnName], true);\r\n                    var matches = idbModules.Key.findMultiEntryMatches(rowKey, me.__range);\r\n\r\n                    for (var j = 0; j < matches.length; j++) {\r\n                        var matchingKey = matches[j];\r\n                        var clone = {\r\n                            matchingKey: idbModules.Key.encode(matchingKey, true),\r\n                            key: rowItem.key\r\n                        };\r\n                        clone[me.__keyColumnName] = rowItem[me.__keyColumnName];\r\n                        clone[me.__valueColumnName] = rowItem[me.__valueColumnName];\r\n                        rows.push(clone);\r\n                    }\r\n                }\r\n\r\n                var reverse = me.direction.indexOf(\"prev\") === 0;\r\n                rows.sort(function (a, b) {\r\n                    if (a.matchingKey.replace('[','z') < b.matchingKey.replace('[','z')) {\r\n                        return reverse ? 1 : -1;\r\n                    }\r\n                    if (a.matchingKey.replace('[','z') > b.matchingKey.replace('[','z')) {\r\n                        return reverse ? -1 : 1;\r\n                    }\r\n                    if (a.key < b.key) {\r\n                        return me.direction === \"prev\" ? 1 : -1;\r\n                    }\r\n                    if (a.key > b.key) {\r\n                        return me.direction === \"prev\" ? -1 : 1;\r\n                    }\r\n                    return 0;\r\n                });\r\n\r\n                me.__prefetchedData = {\r\n                    data: rows,\r\n                    length: rows.length,\r\n                    item: function (index) {\r\n                        return this.data[index];\r\n                    }\r\n                };\r\n                me.__prefetchedIndex = 0;\r\n\r\n                if (me.__count) {\r\n                    success(undefined, rows.length, undefined);\r\n                }\r\n                else if (rows.length > 1) {\r\n                    idbModules.DEBUG && console.log(\"Preloaded \" + me.__prefetchedData.length + \" records for multiEntry cursor\");\r\n                    me.__decode(rows[0], success);\r\n                } else if (rows.length === 1) {\r\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\r\n                    me.__decode(rows[0], success);\r\n                } else {\r\n                    idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\r\n                    success(undefined, undefined, undefined);\r\n                }\r\n            }\r\n            else {\r\n                idbModules.DEBUG && console.log(\"Reached end of multiEntry cursor\");\r\n                success(undefined, undefined, undefined);\r\n            }\r\n        }, function (tx, err) {\r\n            idbModules.DEBUG && console.log(\"Could not execute Cursor.continue\", sql, sqlValues);\r\n            error(err);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Creates an \"onsuccess\" callback\r\n     * @private\r\n     */\r\n    IDBCursor.prototype.__onsuccess = function(success) {\r\n        var me = this;\r\n        return function(key, value, primaryKey) {\r\n            if (me.__count) {\r\n                success(value, me.__req);\r\n            }\r\n            else {\r\n                me.key = key === undefined ? null : key;\r\n                me.value = value === undefined ? null : value;\r\n                me.primaryKey = primaryKey === undefined ? null : primaryKey;\r\n                var result = key === undefined ? null : me;\r\n                success(result, me.__req);\r\n            }\r\n        };\r\n    };\r\n\r\n    IDBCursor.prototype.__decode = function (rowItem, callback) {\r\n        if (this.__multiEntryIndex && this.__unique) {\r\n            if (!this.__matchedKeys) {\r\n                this.__matchedKeys = {};\r\n            }\r\n            if (this.__matchedKeys[rowItem.matchingKey]) {\r\n                callback(undefined, undefined, undefined);\r\n                return;\r\n            }\r\n            this.__matchedKeys[rowItem.matchingKey] = true;\r\n        }\r\n        var key = idbModules.Key.decode(this.__multiEntryIndex ? rowItem.matchingKey : rowItem[this.__keyColumnName], this.__multiEntryIndex);\r\n        var val = this.__valueDecoder.decode(rowItem[this.__valueColumnName]);\r\n        var primaryKey = idbModules.Key.decode(rowItem.key);\r\n        callback(key, val, primaryKey);\r\n    };\r\n\r\n    IDBCursor.prototype[\"continue\"] = function (key) {\r\n        var recordsToPreloadOnContinue = idbModules.cursorPreloadPackSize || 100;\r\n        var me = this;\r\n\r\n        this.__store.transaction.__pushToQueue(me.__req, function cursorContinue(tx, args, success, error) {\r\n            me.__offset++;\r\n\r\n            if (me.__prefetchedData) {\r\n                // We have pre-loaded data for the cursor\r\n                me.__prefetchedIndex++;\r\n                if (me.__prefetchedIndex < me.__prefetchedData.length) {\r\n                    me.__decode(me.__prefetchedData.item(me.__prefetchedIndex), me.__onsuccess(success));\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // No pre-fetched data, do query\r\n            me.__find(key, tx, me.__onsuccess(success), error, recordsToPreloadOnContinue);\r\n        });\r\n    };\r\n\r\n    IDBCursor.prototype.advance = function(count){\r\n        if (count <= 0) {\r\n            throw idbModules.util.createDOMException(\"Type Error\", \"Count is invalid - 0 or negative\", count);\r\n        }\r\n        var me = this;\r\n        this.__store.transaction.__pushToQueue(me.__req, function cursorAdvance(tx, args, success, error){\r\n            me.__offset += count;\r\n            me.__find(undefined, tx, me.__onsuccess(success), error);\r\n        });\r\n    };\r\n\r\n    IDBCursor.prototype.update = function(valueToUpdate){\r\n        var me = this;\r\n        me.__store.transaction.__assertWritable();\r\n        return me.__store.transaction.__addToTransactionQueue(function cursorUpdate(tx, args, success, error){\r\n            idbModules.Sca.encode(valueToUpdate, function(encoded) {\r\n                me.__find(undefined, tx, function(key, value, primaryKey){\r\n                    var store = me.__store;\r\n                    var params = [encoded];\r\n                    var sql = [\"UPDATE\", idbModules.util.quote(store.name), \"SET value = ?\"];\r\n                    idbModules.Key.validate(primaryKey);\r\n\r\n                    // Also correct the indexes in the table\r\n                    for (var i = 0; i < store.indexNames.length; i++) {\r\n                        var index = store.__indexes[store.indexNames[i]];\r\n                        var indexKey = idbModules.Key.getValue(valueToUpdate, index.keyPath);\r\n                        sql.push(\",\", idbModules.util.quote(index.name), \"= ?\");\r\n                        params.push(idbModules.Key.encode(indexKey, index.multiEntry));\r\n                    }\r\n\r\n                    sql.push(\"WHERE key = ?\");\r\n                    params.push(idbModules.Key.encode(primaryKey));\r\n\r\n                    idbModules.DEBUG && console.log(sql.join(\" \"), encoded, key, primaryKey);\r\n                    tx.executeSql(sql.join(\" \"), params, function(tx, data){\r\n                        me.__prefetchedData = null;\r\n                        me.__prefetchedIndex = 0;\r\n                        if (data.rowsAffected === 1) {\r\n                            success(key);\r\n                        }\r\n                        else {\r\n                            error(\"No rows with key found\" + key);\r\n                        }\r\n                    }, function(tx, data){\r\n                        error(data);\r\n                    });\r\n                }, error);\r\n            });\r\n        });\r\n    };\r\n\r\n    IDBCursor.prototype[\"delete\"] = function(){\r\n        var me = this;\r\n        me.__store.transaction.__assertWritable();\r\n        return this.__store.transaction.__addToTransactionQueue(function cursorDelete(tx, args, success, error){\r\n            me.__find(undefined, tx, function(key, value, primaryKey){\r\n                var sql = \"DELETE FROM  \" + idbModules.util.quote(me.__store.name) + \" WHERE key = ?\";\r\n                idbModules.DEBUG && console.log(sql, key, primaryKey);\r\n                idbModules.Key.validate(primaryKey);\r\n                tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data){\r\n                    me.__prefetchedData = null;\r\n                    me.__prefetchedIndex = 0;\r\n                    if (data.rowsAffected === 1) {\r\n                        // lower the offset or we will miss a row\r\n                        me.__offset--;\r\n                        success(undefined);\r\n                    }\r\n                    else {\r\n                        error(\"No rows with key found\" + key);\r\n                    }\r\n                }, function(tx, data){\r\n                    error(data);\r\n                });\r\n            }, error);\r\n        });\r\n    };\r\n\r\n    idbModules.IDBCursor = IDBCursor;\r\n}(idbModules));\r\n\r\n(function(idbModules, undefined) {\r\n    'use strict';\r\n\r\n    /**\r\n     * IDB Index\r\n     * http://www.w3.org/TR/IndexedDB/#idl-def-IDBIndex\r\n     * @param {IDBObjectStore} store\r\n     * @param {IDBIndexProperties} indexProperties\r\n     * @constructor\r\n     */\r\n    function IDBIndex(store, indexProperties) {\r\n        this.objectStore = store;\r\n        this.name = indexProperties.columnName;\r\n        this.keyPath = indexProperties.keyPath;\r\n        this.multiEntry = indexProperties.optionalParams && indexProperties.optionalParams.multiEntry;\r\n        this.unique = indexProperties.optionalParams && indexProperties.optionalParams.unique;\r\n        this.__deleted = !!indexProperties.__deleted;\r\n    }\r\n\r\n    /**\r\n     * Clones an IDBIndex instance for a different IDBObjectStore instance.\r\n     * @param {IDBIndex} index\r\n     * @param {IDBObjectStore} store\r\n     * @protected\r\n     */\r\n    IDBIndex.__clone = function(index, store) {\r\n        return new IDBIndex(store, {\r\n            columnName: index.name,\r\n            keyPath: index.keyPath,\r\n            optionalParams: {\r\n                multiEntry: index.multiEntry,\r\n                unique: index.unique\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Creates a new index on an object store.\r\n     * @param {IDBObjectStore} store\r\n     * @param {IDBIndex} index\r\n     * @returns {IDBIndex}\r\n     * @protected\r\n     */\r\n    IDBIndex.__createIndex = function(store, index) {\r\n        var columnExists = !!store.__indexes[index.name] && store.__indexes[index.name].__deleted;\r\n\r\n        // Add the index to the IDBObjectStore\r\n        store.__indexes[index.name] = index;\r\n        store.indexNames.push(index.name);\r\n\r\n        // Create the index in WebSQL\r\n        var transaction = store.transaction;\r\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\r\n            function error(tx, err) {\r\n                failure(idbModules.util.createDOMException(0, \"Could not create index \\\"\" + index.name + \"\\\"\", err));\r\n            }\r\n\r\n            function applyIndex(tx) {\r\n                // Update the object store's index list\r\n                IDBIndex.__updateIndexList(store, tx, function() {\r\n                    // Add index entries for all existing records\r\n                    tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(store.name), [], function(tx, data) {\r\n                        idbModules.DEBUG && console.log(\"Adding existing \" + store.name + \" records to the \" + index.name + \" index\");\r\n                        addIndexEntry(0);\r\n\r\n                        function addIndexEntry(i) {\r\n                            if (i < data.rows.length) {\r\n                                try {\r\n                                    var value = idbModules.Sca.decode(data.rows.item(i).value);\r\n                                    var indexKey = idbModules.Key.getValue(value, index.keyPath);\r\n                                    indexKey = idbModules.Key.encode(indexKey, index.multiEntry);\r\n\r\n                                    tx.executeSql(\"UPDATE \" + idbModules.util.quote(store.name) + \" set \" + idbModules.util.quote(index.name) + \" = ? where key = ?\", [indexKey, data.rows.item(i).key], function(tx, data) {\r\n                                        addIndexEntry(i + 1);\r\n                                    }, error);\r\n                                }\r\n                                catch (e) {\r\n                                    // Not a valid value to insert into index, so just continue\r\n                                    addIndexEntry(i + 1);\r\n                                }\r\n                            }\r\n                            else {\r\n                                success(store);\r\n                            }\r\n                        }\r\n                    }, error);\r\n                }, error);\r\n            }\r\n\r\n            if (columnExists) {\r\n                // For a previously existing index, just update the index entries in the existing column\r\n                applyIndex(tx);\r\n            }\r\n            else {\r\n                // For a new index, add a new column to the object store, then apply the index\r\n                var sql = [\"ALTER TABLE\", idbModules.util.quote(store.name), \"ADD\", idbModules.util.quote(index.name), \"BLOB\"].join(\" \");\r\n                idbModules.DEBUG && console.log(sql);\r\n                tx.executeSql(sql, [], applyIndex, error);\r\n            }\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes an index from an object store.\r\n     * @param {IDBObjectStore} store\r\n     * @param {IDBIndex} index\r\n     * @protected\r\n     */\r\n    IDBIndex.__deleteIndex = function(store, index) {\r\n        // Remove the index from the IDBObjectStore\r\n        store.__indexes[index.name].__deleted = true;\r\n        store.indexNames.splice(store.indexNames.indexOf(index.name), 1);\r\n\r\n        // Remove the index in WebSQL\r\n        var transaction = store.transaction;\r\n        transaction.__addToTransactionQueue(function createIndex(tx, args, success, failure) {\r\n            function error(tx, err) {\r\n                failure(idbModules.util.createDOMException(0, \"Could not delete index \\\"\" + index.name + \"\\\"\", err));\r\n            }\r\n\r\n            // Update the object store's index list\r\n            IDBIndex.__updateIndexList(store, tx, success, error);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Updates index list for the given object store.\r\n     * @param {IDBObjectStore} store\r\n     * @param {object} tx\r\n     * @param {function} success\r\n     * @param {function} failure\r\n     */\r\n    IDBIndex.__updateIndexList = function(store, tx, success, failure) {\r\n        var indexList = {};\r\n        for (var i = 0; i < store.indexNames.length; i++) {\r\n            var idx = store.__indexes[store.indexNames[i]];\r\n            /** @type {IDBIndexProperties} **/\r\n            indexList[idx.name] = {\r\n                columnName: idx.name,\r\n                keyPath: idx.keyPath,\r\n                optionalParams: {\r\n                    unique: idx.unique,\r\n                    multiEntry: idx.multiEntry\r\n                },\r\n                deleted: !!idx.deleted\r\n            };\r\n        }\r\n\r\n        idbModules.DEBUG && console.log(\"Updating the index list for \" + store.name, indexList);\r\n        tx.executeSql(\"UPDATE __sys__ set indexList = ? where name = ?\", [JSON.stringify(indexList), store.name], function() {\r\n            success(store);\r\n        }, failure);\r\n    };\r\n\r\n    /**\r\n     * Retrieves index data for the given key\r\n     * @param {*|IDBKeyRange} key\r\n     * @param {string} opType\r\n     * @returns {IDBRequest}\r\n     * @private\r\n     */\r\n    IDBIndex.prototype.__fetchIndexData = function(key, opType) {\r\n        var me = this;\r\n        var hasKey, encodedKey;\r\n\r\n        // key is optional\r\n        if (arguments.length === 1) {\r\n            opType = key;\r\n            hasKey = false;\r\n        }\r\n        else {\r\n            idbModules.Key.validate(key);\r\n            encodedKey = idbModules.Key.encode(key, me.multiEntry);\r\n            hasKey = true;\r\n        }\r\n\r\n        return me.objectStore.transaction.__addToTransactionQueue(function fetchIndexData(tx, args, success, error) {\r\n            var sql = [\"SELECT * FROM\", idbModules.util.quote(me.objectStore.name), \"WHERE\", idbModules.util.quote(me.name), \"NOT NULL\"];\r\n            var sqlValues = [];\r\n            if (hasKey) {\r\n                if (me.multiEntry) {\r\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"LIKE ?\");\r\n                    sqlValues.push(\"%\" + encodedKey + \"%\");\r\n                }\r\n                else {\r\n                    sql.push(\"AND\", idbModules.util.quote(me.name), \"= ?\");\r\n                    sqlValues.push(encodedKey);\r\n                }\r\n            }\r\n            idbModules.DEBUG && console.log(\"Trying to fetch data for Index\", sql.join(\" \"), sqlValues);\r\n            tx.executeSql(sql.join(\" \"), sqlValues, function(tx, data) {\r\n                var recordCount = 0, record = null;\r\n                if (me.multiEntry) {\r\n                    for (var i = 0; i < data.rows.length; i++) {\r\n                        var row = data.rows.item(i);\r\n                        var rowKey = idbModules.Key.decode(row[me.name]);\r\n                        if (hasKey && idbModules.Key.isMultiEntryMatch(encodedKey, row[me.name])) {\r\n                            recordCount++;\r\n                            record = record || row;\r\n                        }\r\n                        else if (!hasKey && rowKey !== undefined) {\r\n                            recordCount = recordCount + (rowKey instanceof Array ? rowKey.length : 1);\r\n                            record = record || row;\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    recordCount = data.rows.length;\r\n                    record = recordCount && data.rows.item(0);\r\n                }\r\n\r\n                if (opType === \"count\") {\r\n                    success(recordCount);\r\n                }\r\n                else if (recordCount === 0) {\r\n                    success(undefined);\r\n                }\r\n                else if (opType === \"key\") {\r\n                    success(idbModules.Key.decode(record.key));\r\n                }\r\n                else { // when opType is value\r\n                    success(idbModules.Sca.decode(record.value));\r\n                }\r\n            }, error);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Opens a cursor over the given key range.\r\n     * @param {IDBKeyRange} range\r\n     * @param {string} direction\r\n     * @returns {IDBRequest}\r\n     */\r\n    IDBIndex.prototype.openCursor = function(range, direction) {\r\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"value\").__req;\r\n    };\r\n\r\n    /**\r\n     * Opens a cursor over the given key range.  The cursor only includes key values, not data.\r\n     * @param {IDBKeyRange} range\r\n     * @param {string} direction\r\n     * @returns {IDBRequest}\r\n     */\r\n    IDBIndex.prototype.openKeyCursor = function(range, direction) {\r\n        return new idbModules.IDBCursor(range, direction, this.objectStore, this, this.name, \"key\").__req;\r\n    };\r\n\r\n    IDBIndex.prototype.get = function(key) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No key was specified\");\r\n        }\r\n\r\n        return this.__fetchIndexData(key, \"value\");\r\n    };\r\n\r\n    IDBIndex.prototype.getKey = function(key) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No key was specified\");\r\n        }\r\n\r\n        return this.__fetchIndexData(key, \"key\");\r\n    };\r\n\r\n    IDBIndex.prototype.count = function(key) {\r\n        // key is optional\r\n        if (key === undefined) {\r\n            return this.__fetchIndexData(\"count\");\r\n        }\r\n        else if (key instanceof idbModules.IDBKeyRange) {\r\n            return new idbModules.IDBCursor(key, \"next\", this.objectStore, this, this.name, \"value\", true).__req;\r\n        }\r\n        else {\r\n            return this.__fetchIndexData(key, \"count\");\r\n        }\r\n    };\r\n\r\n    idbModules.IDBIndex = IDBIndex;\r\n}(idbModules));\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    /**\r\n     * IndexedDB Object Store\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBObjectStore\r\n     * @param {IDBObjectStoreProperties} storeProperties\r\n     * @param {IDBTransaction} transaction\r\n     * @constructor\r\n     */\r\n    function IDBObjectStore(storeProperties, transaction) {\r\n        this.name = storeProperties.name;\r\n        this.keyPath = JSON.parse(storeProperties.keyPath);\r\n        this.transaction = transaction;\r\n\r\n        // autoInc is numeric (0/1) on WinPhone\r\n        this.autoIncrement = typeof storeProperties.autoInc === \"string\" ? storeProperties.autoInc === \"true\" : !!storeProperties.autoInc;\r\n\r\n        this.__indexes = {};\r\n        this.indexNames = new idbModules.util.StringList();\r\n        var indexList = JSON.parse(storeProperties.indexList);\r\n        for (var indexName in indexList) {\r\n            if (indexList.hasOwnProperty(indexName)) {\r\n                var index = new idbModules.IDBIndex(this, indexList[indexName]);\r\n                this.__indexes[index.name] = index;\r\n                if (!index.__deleted) {\r\n                    this.indexNames.push(index.name);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Clones an IDBObjectStore instance for a different IDBTransaction instance.\r\n     * @param {IDBObjectStore} store\r\n     * @param {IDBTransaction} transaction\r\n     * @protected\r\n     */\r\n    IDBObjectStore.__clone = function(store, transaction) {\r\n        var newStore = new IDBObjectStore({\r\n            name: store.name,\r\n            keyPath: JSON.stringify(store.keyPath),\r\n            autoInc: JSON.stringify(store.autoIncrement),\r\n            indexList: \"{}\"\r\n        }, transaction);\r\n        newStore.__indexes = store.__indexes;\r\n        newStore.indexNames = store.indexNames;\r\n        return newStore;\r\n    };\r\n\r\n    /**\r\n     * Creates a new object store in the database.\r\n     * @param {IDBDatabase} db\r\n     * @param {IDBObjectStore} store\r\n     * @protected\r\n     */\r\n    IDBObjectStore.__createObjectStore = function(db, store) {\r\n        // Add the object store to the IDBDatabase\r\n        db.__objectStores[store.name] = store;\r\n        db.objectStoreNames.push(store.name);\r\n\r\n        // Add the object store to WebSQL\r\n        var transaction = db.__versionTransaction;\r\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\r\n        transaction.__addToTransactionQueue(function createObjectStore(tx, args, success, failure) {\r\n            function error(tx, err) {\r\n                throw idbModules.util.createDOMException(0, \"Could not create object store \\\"\" + store.name + \"\\\"\", err);\r\n            }\r\n\r\n            //key INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL UNIQUE\r\n            var sql = [\"CREATE TABLE\", idbModules.util.quote(store.name), \"(key BLOB\", store.autoIncrement ? \"UNIQUE, inc INTEGER PRIMARY KEY AUTOINCREMENT\" : \"PRIMARY KEY\", \", value BLOB)\"].join(\" \");\r\n            idbModules.DEBUG && console.log(sql);\r\n            tx.executeSql(sql, [], function(tx, data) {\r\n                tx.executeSql(\"INSERT INTO __sys__ VALUES (?,?,?,?)\", [store.name, JSON.stringify(store.keyPath), store.autoIncrement, \"{}\"], function() {\r\n                    success(store);\r\n                }, error);\r\n            }, error);\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Deletes an object store from the database.\r\n     * @param {IDBDatabase} db\r\n     * @param {IDBObjectStore} store\r\n     * @protected\r\n     */\r\n    IDBObjectStore.__deleteObjectStore = function(db, store) {\r\n        // Remove the object store from the IDBDatabase\r\n        db.__objectStores[store.name] = undefined;\r\n        db.objectStoreNames.splice(db.objectStoreNames.indexOf(store.name), 1);\r\n\r\n        // Remove the object store from WebSQL\r\n        var transaction = db.__versionTransaction;\r\n        idbModules.IDBTransaction.__assertVersionChange(transaction);\r\n        transaction.__addToTransactionQueue(function deleteObjectStore(tx, args, success, failure) {\r\n            function error(tx, err) {\r\n                failure(idbModules.util.createDOMException(0, \"Could not delete ObjectStore\", err));\r\n            }\r\n\r\n            tx.executeSql(\"SELECT * FROM __sys__ where name = ?\", [store.name], function(tx, data) {\r\n                if (data.rows.length > 0) {\r\n                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(store.name), [], function() {\r\n                        tx.executeSql(\"DELETE FROM __sys__ WHERE name = ?\", [store.name], function() {\r\n                            success();\r\n                        }, error);\r\n                    }, error);\r\n                }\r\n            });\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Determines whether the given inline or out-of-line key is valid, according to the object store's schema.\r\n     * @param {*} value     Used for inline keys\r\n     * @param {*} key       Used for out-of-line keys\r\n     * @private\r\n     */\r\n    IDBObjectStore.prototype.__validateKey = function(value, key) {\r\n        if (this.keyPath) {\r\n            if (typeof key !== \"undefined\") {\r\n                throw idbModules.util.createDOMException(\"DataError\", \"The object store uses in-line keys and the key parameter was provided\", this);\r\n            }\r\n            else if (value && typeof value === \"object\") {\r\n                key = idbModules.Key.getValue(value, this.keyPath);\r\n                if (key === undefined) {\r\n                    if (this.autoIncrement) {\r\n                        // A key will be generated\r\n                        return;\r\n                    }\r\n                    else {\r\n                        throw idbModules.util.createDOMException(\"DataError\", \"Could not eval key from keyPath\");\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                throw idbModules.util.createDOMException(\"DataError\", \"KeyPath was specified, but value was not an object\");\r\n            }\r\n        }\r\n        else {\r\n            if (typeof key === \"undefined\") {\r\n                if (this.autoIncrement) {\r\n                    // A key will be generated\r\n                    return;\r\n                }\r\n                else {\r\n                    throw idbModules.util.createDOMException(\"DataError\", \"The object store uses out-of-line keys and has no key generator and the key parameter was not provided. \", this);\r\n                }\r\n            }\r\n        }\r\n\r\n        idbModules.Key.validate(key);\r\n    };\r\n\r\n    /**\r\n     * From the store properties and object, extracts the value for the key in hte object Store\r\n     * If the table has auto increment, get the next in sequence\r\n     * @param {Object} tx\r\n     * @param {Object} value\r\n     * @param {Object} key\r\n     * @param {function} success\r\n     * @param {function} failure\r\n     */\r\n    IDBObjectStore.prototype.__deriveKey = function(tx, value, key, success, failure) {\r\n        var me = this;\r\n\r\n        function getNextAutoIncKey(callback) {\r\n            tx.executeSql(\"SELECT * FROM sqlite_sequence where name like ?\", [me.name], function(tx, data) {\r\n                if (data.rows.length !== 1) {\r\n                    callback(1);\r\n                }\r\n                else {\r\n                    callback(data.rows.item(0).seq + 1);\r\n                }\r\n            }, function(tx, error) {\r\n                failure(idbModules.util.createDOMException(\"DataError\", \"Could not get the auto increment value for key\", error));\r\n            });\r\n        }\r\n\r\n        if (me.keyPath) {\r\n            var primaryKey = idbModules.Key.getValue(value, me.keyPath);\r\n            if (primaryKey === undefined && me.autoIncrement) {\r\n                getNextAutoIncKey(function(primaryKey) {\r\n                    try {\r\n                        // Update the value with the new key\r\n                        idbModules.Key.setValue(value, me.keyPath, primaryKey);\r\n                        success(primaryKey);\r\n                    }\r\n                    catch (e) {\r\n                        failure(idbModules.util.createDOMException(\"DataError\", \"Could not assign a generated value to the keyPath\", e));\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                success(primaryKey);\r\n            }\r\n        }\r\n        else {\r\n            if (typeof key === \"undefined\" && me.autoIncrement) {\r\n                // Looks like this has autoInc, so lets get the next in sequence and return that.\r\n                getNextAutoIncKey(success);\r\n            }\r\n            else {\r\n                success(key);\r\n            }\r\n        }\r\n    };\r\n\r\n    IDBObjectStore.prototype.__insertData = function(tx, encoded, value, primaryKey, success, error) {\r\n        try {\r\n            var paramMap = {};\r\n            if (typeof primaryKey !== \"undefined\") {\r\n                idbModules.Key.validate(primaryKey);\r\n                paramMap.key = idbModules.Key.encode(primaryKey);\r\n            }\r\n            for (var i = 0; i < this.indexNames.length; i++) {\r\n                var index = this.__indexes[this.indexNames[i]];\r\n                paramMap[index.name] = idbModules.Key.encode(idbModules.Key.getValue(value, index.keyPath), index.multiEntry);\r\n            }\r\n            var sqlStart = [\"INSERT INTO \", idbModules.util.quote(this.name), \"(\"];\r\n            var sqlEnd = [\" VALUES (\"];\r\n            var sqlValues = [];\r\n            for (var key in paramMap) {\r\n                sqlStart.push(idbModules.util.quote(key) + \",\");\r\n                sqlEnd.push(\"?,\");\r\n                sqlValues.push(paramMap[key]);\r\n            }\r\n            // removing the trailing comma\r\n            sqlStart.push(\"value )\");\r\n            sqlEnd.push(\"?)\");\r\n            sqlValues.push(encoded);\r\n\r\n            var sql = sqlStart.join(\" \") + sqlEnd.join(\" \");\r\n\r\n            idbModules.DEBUG && console.log(\"SQL for adding\", sql, sqlValues);\r\n            tx.executeSql(sql, sqlValues, function(tx, data) {\r\n                idbModules.Sca.encode(primaryKey, function(primaryKey) {\r\n                    primaryKey = idbModules.Sca.decode(primaryKey);\r\n                    success(primaryKey);\r\n                });\r\n            }, function(tx, err) {\r\n                error(idbModules.util.createDOMError(\"ConstraintError\", err.message, err));\r\n            });\r\n        }\r\n        catch (e) {\r\n            error(e);\r\n        }\r\n    };\r\n\r\n    IDBObjectStore.prototype.add = function(value, key) {\r\n        var me = this;\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No value was specified\");\r\n        }\r\n        this.__validateKey(value, key);\r\n        me.transaction.__assertWritable();\r\n\r\n        var request = me.transaction.__createRequest();\r\n        me.transaction.__pushToQueue(request, function objectStoreAdd(tx, args, success, error) {\r\n            me.__deriveKey(tx, value, key, function(primaryKey) {\r\n                idbModules.Sca.encode(value, function(encoded) {\r\n                    me.__insertData(tx, encoded, value, primaryKey, success, error);\r\n                });\r\n            }, error);\r\n        });\r\n        return request;\r\n    };\r\n\r\n    IDBObjectStore.prototype.put = function(value, key) {\r\n        var me = this;\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No value was specified\");\r\n        }\r\n        this.__validateKey(value, key);\r\n        me.transaction.__assertWritable();\r\n\r\n        var request = me.transaction.__createRequest();\r\n        me.transaction.__pushToQueue(request, function objectStorePut(tx, args, success, error) {\r\n            me.__deriveKey(tx, value, key, function(primaryKey) {\r\n                idbModules.Sca.encode(value, function(encoded) {\r\n                    // First try to delete if the record exists\r\n                    idbModules.Key.validate(primaryKey);\r\n                    var sql = \"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\";\r\n                    tx.executeSql(sql, [idbModules.Key.encode(primaryKey)], function(tx, data) {\r\n                        idbModules.DEBUG && console.log(\"Did the row with the\", primaryKey, \"exist? \", data.rowsAffected);\r\n                        me.__insertData(tx, encoded, value, primaryKey, success, error);\r\n                    }, function(tx, err) {\r\n                        error(err);\r\n                    });\r\n                });\r\n            }, error);\r\n        });\r\n        return request;\r\n    };\r\n\r\n    IDBObjectStore.prototype.get = function(key) {\r\n        // TODO Key should also be a key range\r\n        var me = this;\r\n\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No key was specified\");\r\n        }\r\n\r\n        idbModules.Key.validate(key);\r\n        var primaryKey = idbModules.Key.encode(key);\r\n        return me.transaction.__addToTransactionQueue(function objectStoreGet(tx, args, success, error) {\r\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\r\n            tx.executeSql(\"SELECT * FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\r\n                idbModules.DEBUG && console.log(\"Fetched data\", data);\r\n                var value;\r\n                try {\r\n                    // Opera can't deal with the try-catch here.\r\n                    if (0 === data.rows.length) {\r\n                        return success();\r\n                    }\r\n\r\n                    value = idbModules.Sca.decode(data.rows.item(0).value);\r\n                }\r\n                catch (e) {\r\n                    // If no result is returned, or error occurs when parsing JSON\r\n                    idbModules.DEBUG && console.log(e);\r\n                }\r\n                success(value);\r\n            }, function(tx, err) {\r\n                error(err);\r\n            });\r\n        });\r\n    };\r\n\r\n    IDBObjectStore.prototype[\"delete\"] = function(key) {\r\n        var me = this;\r\n\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No key was specified\");\r\n        }\r\n\r\n        me.transaction.__assertWritable();\r\n        idbModules.Key.validate(key);\r\n        var primaryKey = idbModules.Key.encode(key);\r\n        // TODO key should also support key ranges\r\n        return me.transaction.__addToTransactionQueue(function objectStoreDelete(tx, args, success, error) {\r\n            idbModules.DEBUG && console.log(\"Fetching\", me.name, primaryKey);\r\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name) + \" where key = ?\", [primaryKey], function(tx, data) {\r\n                idbModules.DEBUG && console.log(\"Deleted from database\", data.rowsAffected);\r\n                success();\r\n            }, function(tx, err) {\r\n                error(err);\r\n            });\r\n        });\r\n    };\r\n\r\n    IDBObjectStore.prototype.clear = function() {\r\n        var me = this;\r\n        me.transaction.__assertWritable();\r\n        return me.transaction.__addToTransactionQueue(function objectStoreClear(tx, args, success, error) {\r\n            tx.executeSql(\"DELETE FROM \" + idbModules.util.quote(me.name), [], function(tx, data) {\r\n                idbModules.DEBUG && console.log(\"Cleared all records from database\", data.rowsAffected);\r\n                success();\r\n            }, function(tx, err) {\r\n                error(err);\r\n            });\r\n        });\r\n    };\r\n\r\n    IDBObjectStore.prototype.count = function(key) {\r\n        if (key instanceof idbModules.IDBKeyRange) {\r\n            return new idbModules.IDBCursor(key, \"next\", this, this, \"key\", \"value\", true).__req;\r\n        }\r\n        else {\r\n            var me = this;\r\n            var hasKey = false;\r\n\r\n            // key is optional\r\n            if (key !== undefined) {\r\n                hasKey = true;\r\n                idbModules.Key.validate(key);\r\n            }\r\n\r\n            return me.transaction.__addToTransactionQueue(function objectStoreCount(tx, args, success, error) {\r\n                var sql = \"SELECT * FROM \" + idbModules.util.quote(me.name) + (hasKey ? \" WHERE key = ?\" : \"\");\r\n                var sqlValues = [];\r\n                hasKey && sqlValues.push(idbModules.Key.encode(key));\r\n                tx.executeSql(sql, sqlValues, function(tx, data) {\r\n                    success(data.rows.length);\r\n                }, function(tx, err) {\r\n                    error(err);\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    IDBObjectStore.prototype.openCursor = function(range, direction) {\r\n        return new idbModules.IDBCursor(range, direction, this, this, \"key\", \"value\").__req;\r\n    };\r\n\r\n    IDBObjectStore.prototype.index = function(indexName) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No index name was specified\");\r\n        }\r\n        var index = this.__indexes[indexName];\r\n        if (!index) {\r\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\r\n        }\r\n\r\n        return idbModules.IDBIndex.__clone(index, this);\r\n    };\r\n\r\n    /**\r\n     * Creates a new index on the object store.\r\n     * @param {string} indexName\r\n     * @param {string} keyPath\r\n     * @param {object} optionalParameters\r\n     * @returns {IDBIndex}\r\n     */\r\n    IDBObjectStore.prototype.createIndex = function(indexName, keyPath, optionalParameters) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No index name was specified\");\r\n        }\r\n        if (arguments.length === 1) {\r\n            throw new TypeError(\"No key path was specified\");\r\n        }\r\n        if (keyPath instanceof Array && optionalParameters && optionalParameters.multiEntry) {\r\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"The keyPath argument was an array and the multiEntry option is true.\");\r\n        }\r\n        if (this.__indexes[indexName] && !this.__indexes[indexName].__deleted) {\r\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Index \\\"\" + indexName + \"\\\" already exists on \" + this.name);\r\n        }\r\n\r\n        this.transaction.__assertVersionChange();\r\n\r\n        optionalParameters = optionalParameters || {};\r\n        /** @name IDBIndexProperties **/\r\n        var indexProperties = {\r\n            columnName: indexName,\r\n            keyPath: keyPath,\r\n            optionalParams: {\r\n                unique: !!optionalParameters.unique,\r\n                multiEntry: !!optionalParameters.multiEntry\r\n            }\r\n        };\r\n        var index = new idbModules.IDBIndex(this, indexProperties);\r\n        idbModules.IDBIndex.__createIndex(this, index);\r\n        return index;\r\n    };\r\n\r\n    IDBObjectStore.prototype.deleteIndex = function(indexName) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No index name was specified\");\r\n        }\r\n        var index = this.__indexes[indexName];\r\n        if (!index) {\r\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Index \\\"\" + indexName + \"\\\" does not exist on \" + this.name);\r\n        }\r\n        this.transaction.__assertVersionChange();\r\n\r\n        idbModules.IDBIndex.__deleteIndex(this, index);\r\n    };\r\n\r\n    idbModules.IDBObjectStore = IDBObjectStore;\r\n}(idbModules));\r\n\r\nimport EventTarget from 'eventtarget';\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    var uniqueID = 0;\r\n\r\n    /**\r\n     * The IndexedDB Transaction\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#idl-def-IDBTransaction\r\n     * @param {IDBDatabase} db\r\n     * @param {string[]} storeNames\r\n     * @param {string} mode\r\n     * @constructor\r\n     */\r\n    function IDBTransaction(db, storeNames, mode) {\r\n        this.__id = ++uniqueID; // for debugging simultaneous transactions\r\n        this.__active = true;\r\n        this.__running = false;\r\n        this.__errored = false;\r\n        this.__requests = [];\r\n        this.__storeNames = storeNames;\r\n        this.mode = mode;\r\n        this.db = db;\r\n        this.error = null;\r\n        this.onabort = this.onerror = this.oncomplete = null;\r\n\r\n        // Kick off the transaction as soon as all synchronous code is done.\r\n        var me = this;\r\n        setTimeout(function() { me.__executeRequests(); }, 0);\r\n    }\r\n\r\n    IDBTransaction.prototype.__executeRequests = function() {\r\n        if (this.__running) {\r\n            idbModules.DEBUG && console.log(\"Looks like the request set is already running\", this.mode);\r\n            return;\r\n        }\r\n\r\n        this.__running = true;\r\n        var me = this;\r\n\r\n        me.db.__db.transaction(function executeRequests(tx) {\r\n                me.__tx = tx;\r\n                var q = null, i = 0;\r\n\r\n                function success(result, req) {\r\n                    if (req) {\r\n                        q.req = req;// Need to do this in case of cursors\r\n                    }\r\n                    q.req.readyState = \"done\";\r\n                    q.req.result = result;\r\n                    delete q.req.error;\r\n                    var e = idbModules.util.createEvent(\"success\");\r\n                    idbModules.util.callback(\"onsuccess\", q.req, e);\r\n                    i++;\r\n                    executeNextRequest();\r\n                }\r\n\r\n                function error(tx, err) {\r\n                    err = idbModules.util.findError(arguments);\r\n                    try {\r\n                        // Fire an error event for the current IDBRequest\r\n                        q.req.readyState = \"done\";\r\n                        q.req.error = err || \"DOMError\";\r\n                        q.req.result = undefined;\r\n                        var e = idbModules.util.createEvent(\"error\", err);\r\n                        idbModules.util.callback(\"onerror\", q.req, e);\r\n                    }\r\n                    finally {\r\n                        // Fire an error event for the transaction\r\n                        transactionError(err);\r\n                    }\r\n                }\r\n\r\n                function executeNextRequest() {\r\n                    if (i >= me.__requests.length) {\r\n                        // All requests in the transaction are done\r\n                        me.__requests = [];\r\n                        if (me.__active) {\r\n                            me.__active = false;\r\n                            transactionFinished();\r\n                        }\r\n                    }\r\n                    else {\r\n                        try {\r\n                            q = me.__requests[i];\r\n                            q.op(tx, q.args, success, error);\r\n                        }\r\n                        catch (e) {\r\n                            error(e);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                executeNextRequest();\r\n            },\r\n\r\n            function webSqlError(err) {\r\n                transactionError(err);\r\n            }\r\n        );\r\n\r\n        function transactionError(err) {\r\n            idbModules.util.logError(\"Error\", \"An error occurred in a transaction\", err);\r\n\r\n            if (me.__errored) {\r\n                // We've already called \"onerror\", \"onabort\", or thrown, so don't do it again.\r\n                return;\r\n            }\r\n\r\n            me.__errored = true;\r\n\r\n            if (!me.__active) {\r\n                // The transaction has already completed, so we can't call \"onerror\" or \"onabort\".\r\n                // So throw the error instead.\r\n                throw err;\r\n            }\r\n\r\n            try {\r\n                me.error = err;\r\n                var evt = idbModules.util.createEvent(\"error\");\r\n                idbModules.util.callback(\"onerror\", me, evt);\r\n                idbModules.util.callback(\"onerror\", me.db, evt);\r\n            }\r\n            finally {\r\n                me.abort();\r\n            }\r\n        }\r\n\r\n        function transactionFinished() {\r\n            idbModules.DEBUG && console.log(\"Transaction completed\");\r\n            var evt = idbModules.util.createEvent(\"complete\");\r\n            try {\r\n                idbModules.util.callback(\"oncomplete\", me, evt);\r\n                idbModules.util.callback(\"__oncomplete\", me, evt);\r\n            }\r\n            catch (e) {\r\n                // An error occurred in the \"oncomplete\" handler.\r\n                // It's too late to call \"onerror\" or \"onabort\". Throw a global error instead.\r\n                // (this may seem odd/bad, but it's how all native IndexedDB implementations work)\r\n                me.__errored = true;\r\n                throw e;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Creates a new IDBRequest for the transaction.\r\n     * NOTE: The transaction is not queued util you call {@link IDBTransaction#__pushToQueue}\r\n     * @returns {IDBRequest}\r\n     * @protected\r\n     */\r\n    IDBTransaction.prototype.__createRequest = function() {\r\n        var request = new idbModules.IDBRequest();\r\n        request.source = this.db;\r\n        request.transaction = this;\r\n        return request;\r\n    };\r\n\r\n    /**\r\n     * Adds a callback function to the transaction queue\r\n     * @param {function} callback\r\n     * @param {*} args\r\n     * @returns {IDBRequest}\r\n     * @protected\r\n     */\r\n    IDBTransaction.prototype.__addToTransactionQueue = function(callback, args) {\r\n        var request = this.__createRequest();\r\n        this.__pushToQueue(request, callback, args);\r\n        return request;\r\n    };\r\n\r\n    /**\r\n     * Adds an IDBRequest to the transaction queue\r\n     * @param {IDBRequest} request\r\n     * @param {function} callback\r\n     * @param {*} args\r\n     * @protected\r\n     */\r\n    IDBTransaction.prototype.__pushToQueue = function(request, callback, args) {\r\n        this.__assertActive();\r\n        this.__requests.push({\r\n            \"op\": callback,\r\n            \"args\": args,\r\n            \"req\": request\r\n        });\r\n    };\r\n\r\n    IDBTransaction.prototype.__assertActive = function() {\r\n        if (!this.__active) {\r\n            throw idbModules.util.createDOMException(\"TransactionInactiveError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\r\n        }\r\n    };\r\n\r\n    IDBTransaction.prototype.__assertWritable = function() {\r\n        if (this.mode === IDBTransaction.READ_ONLY) {\r\n            throw idbModules.util.createDOMException(\"ReadOnlyError\", \"The transaction is read only\");\r\n        }\r\n    };\r\n\r\n    IDBTransaction.prototype.__assertVersionChange = function() {\r\n        IDBTransaction.__assertVersionChange(this);\r\n    };\r\n\r\n    IDBTransaction.__assertVersionChange = function(tx) {\r\n        if (!tx || tx.mode !== IDBTransaction.VERSION_CHANGE) {\r\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"Not a version transaction\");\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Returns the specified object store.\r\n     * @param {string} objectStoreName\r\n     * @returns {IDBObjectStore}\r\n     */\r\n    IDBTransaction.prototype.objectStore = function(objectStoreName) {\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No object store name was specified\");\r\n        }\r\n        if (!this.__active) {\r\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"A request was placed against a transaction which is currently not active, or which is finished\");\r\n        }\r\n        if (this.__storeNames.indexOf(objectStoreName) === -1 && this.mode !== IDBTransaction.VERSION_CHANGE) {\r\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" is not participating in this transaction\");\r\n        }\r\n        var store = this.db.__objectStores[objectStoreName];\r\n        if (!store) {\r\n            throw idbModules.util.createDOMException(\"NotFoundError\", objectStoreName + \" does not exist in \" + this.db.name);\r\n        }\r\n\r\n        return idbModules.IDBObjectStore.__clone(store, this);\r\n    };\r\n\r\n    IDBTransaction.prototype.abort = function() {\r\n        var me = this;\r\n        idbModules.DEBUG && console.log(\"The transaction was aborted\", me);\r\n        me.__active = false;\r\n        var evt = idbModules.util.createEvent(\"abort\");\r\n\r\n        // Fire the \"onabort\" event asynchronously, so errors don't bubble\r\n        setTimeout(function() {\r\n            idbModules.util.callback(\"onabort\", me, evt);\r\n        }, 0);\r\n    };\r\n\r\n    Object.assign(IDBTransaction.prototype, EventTarget.prototype);\r\n\r\n    IDBTransaction.READ_ONLY = \"readonly\";\r\n    IDBTransaction.READ_WRITE = \"readwrite\";\r\n    IDBTransaction.VERSION_CHANGE = \"versionchange\";\r\n\r\n    idbModules.IDBTransaction = IDBTransaction;\r\n}(idbModules));\r\n\r\n(function(idbModules){\r\n    'use strict';\r\n\r\n    /**\r\n     * IDB Database Object\r\n     * http://dvcs.w3.org/hg/IndexedDB/raw-file/tip/Overview.html#database-interface\r\n     * @constructor\r\n     */\r\n    function IDBDatabase(db, name, version, storeProperties){\r\n        this.__db = db;\r\n        this.__closed = false;\r\n        this.version = version;\r\n        this.name = name;\r\n        this.onabort = this.onerror = this.onversionchange = null;\r\n\r\n        this.__objectStores = {};\r\n        this.objectStoreNames = new idbModules.util.StringList();\r\n        for (var i = 0; i < storeProperties.rows.length; i++) {\r\n            var store = new idbModules.IDBObjectStore(storeProperties.rows.item(i));\r\n            this.__objectStores[store.name] = store;\r\n            this.objectStoreNames.push(store.name);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a new object store.\r\n     * @param {string} storeName\r\n     * @param {object} [createOptions]\r\n     * @returns {IDBObjectStore}\r\n     */\r\n    IDBDatabase.prototype.createObjectStore = function(storeName, createOptions){\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No object store name was specified\");\r\n        }\r\n        if (this.__objectStores[storeName]) {\r\n            throw idbModules.util.createDOMException(\"ConstraintError\", \"Object store \\\"\" + storeName + \"\\\" already exists in \" + this.name);\r\n        }\r\n        this.__versionTransaction.__assertVersionChange();\r\n\r\n        createOptions = createOptions || {};\r\n        /** @name IDBObjectStoreProperties **/\r\n        var storeProperties = {\r\n            name: storeName,\r\n            keyPath: JSON.stringify(createOptions.keyPath || null),\r\n            autoInc: JSON.stringify(createOptions.autoIncrement),\r\n            indexList: \"{}\"\r\n        };\r\n        var store = new idbModules.IDBObjectStore(storeProperties, this.__versionTransaction);\r\n        idbModules.IDBObjectStore.__createObjectStore(this, store);\r\n        return store;\r\n    };\r\n\r\n    /**\r\n     * Deletes an object store.\r\n     * @param {string} storeName\r\n     */\r\n    IDBDatabase.prototype.deleteObjectStore = function(storeName){\r\n        if (arguments.length === 0) {\r\n            throw new TypeError(\"No object store name was specified\");\r\n        }\r\n        var store = this.__objectStores[storeName];\r\n        if (!store) {\r\n            throw idbModules.util.createDOMException(\"NotFoundError\", \"Object store \\\"\" + storeName + \"\\\" does not exist in \" + this.name);\r\n        }\r\n        this.__versionTransaction.__assertVersionChange();\r\n\r\n        idbModules.IDBObjectStore.__deleteObjectStore(this, store);\r\n    };\r\n\r\n    IDBDatabase.prototype.close = function(){\r\n        this.__closed = true;\r\n    };\r\n\r\n    /**\r\n     * Starts a new transaction.\r\n     * @param {string|string[]} storeNames\r\n     * @param {string} mode\r\n     * @returns {IDBTransaction}\r\n     */\r\n    IDBDatabase.prototype.transaction = function(storeNames, mode){\r\n        if (this.__closed) {\r\n            throw idbModules.util.createDOMException(\"InvalidStateError\", \"An attempt was made to start a new transaction on a database connection that is not open\");\r\n        }\r\n\r\n        if (typeof mode === \"number\") {\r\n            mode = mode === 1 ? IDBTransaction.READ_WRITE : IDBTransaction.READ_ONLY;\r\n            idbModules.DEBUG && console.log(\"Mode should be a string, but was specified as \", mode);\r\n        }\r\n        else {\r\n            mode = mode || IDBTransaction.READ_ONLY;\r\n        }\r\n\r\n        if (mode !== IDBTransaction.READ_ONLY && mode !== IDBTransaction.READ_WRITE) {\r\n            throw new TypeError(\"Invalid transaction mode: \" + mode);\r\n        }\r\n\r\n        storeNames = typeof storeNames === \"string\" ? [storeNames] : storeNames;\r\n        if (storeNames.length === 0) {\r\n            throw idbModules.util.createDOMException(\"InvalidAccessError\", \"No object store names were specified\");\r\n        }\r\n        for (var i = 0; i < storeNames.length; i++) {\r\n            if (!this.objectStoreNames.contains(storeNames[i])) {\r\n                throw idbModules.util.createDOMException(\"NotFoundError\", \"The \\\"\" + storeNames[i] + \"\\\" object store does not exist\");\r\n            }\r\n        }\r\n\r\n        var transaction = new idbModules.IDBTransaction(this, storeNames, mode);\r\n        return transaction;\r\n    };\r\n\r\n    idbModules.IDBDatabase = IDBDatabase;\r\n}(idbModules));\r\n\r\n/*global nodeWebsql */\r\nvar openDatabase = typeof nodeWebsql === 'undefined' ? window.openDatabase : nodeWebsql;\r\n\r\n(function(idbModules) {\r\n    'use strict';\r\n\r\n    var DEFAULT_DB_SIZE = 4 * 1024 * 1024;\r\n    var sysdb;\r\n\r\n    /**\r\n     * Craetes the sysDB to keep track of version numbers for databases\r\n     **/\r\n    function createSysDB(success, failure) {\r\n        function sysDbCreateError(tx, err) {\r\n            err = idbModules.util.findError(arguments);\r\n            idbModules.DEBUG && console.log(\"Error in sysdb transaction - when creating dbVersions\", err);\r\n            failure(err);\r\n        }\r\n\r\n        if (sysdb) {\r\n            success();\r\n        }\r\n        else {\r\n            sysdb = openDatabase(\"__sysdb__\", 1, \"System Database\", DEFAULT_DB_SIZE);\r\n            sysdb.transaction(function(tx) {\r\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS dbVersions (name VARCHAR(255), version INT);\", [], success, sysDbCreateError);\r\n            }, sysDbCreateError);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * IDBFactory Class\r\n     * https://w3c.github.io/IndexedDB/#idl-def-IDBFactory\r\n     * @constructor\r\n     */\r\n    function IDBFactory() {\r\n        this.modules = idbModules;\r\n    }\r\n\r\n    /**\r\n     * The IndexedDB Method to create a new database and return the DB\r\n     * @param {string} name\r\n     * @param {number} version\r\n     */\r\n    IDBFactory.prototype.open = function(name, version) {\r\n        var req = new idbModules.IDBOpenDBRequest();\r\n        var calledDbCreateError = false;\r\n\r\n        if (arguments.length === 0) {\r\n            throw new TypeError('Database name is required');\r\n        }\r\n        else if (arguments.length === 2) {\r\n            version = parseFloat(version);\r\n            if (isNaN(version) || !isFinite(version) || version <= 0) {\r\n                throw new TypeError('Invalid database version: ' + version);\r\n            }\r\n        }\r\n        name = name + ''; // cast to a string\r\n\r\n        function dbCreateError(tx, err) {\r\n            if (calledDbCreateError) {\r\n                return;\r\n            }\r\n            err = idbModules.util.findError(arguments);\r\n            calledDbCreateError = true;\r\n            var evt = idbModules.util.createEvent(\"error\", arguments);\r\n            req.readyState = \"done\";\r\n            req.error = err || \"DOMError\";\r\n            idbModules.util.callback(\"onerror\", req, evt);\r\n        }\r\n\r\n        function openDB(oldVersion) {\r\n            var db = openDatabase(name, 1, name, DEFAULT_DB_SIZE);\r\n            req.readyState = \"done\";\r\n            if (typeof version === \"undefined\") {\r\n                version = oldVersion || 1;\r\n            }\r\n            if (version <= 0 || oldVersion > version) {\r\n                var err = idbModules.util.createDOMError(\"VersionError\", \"An attempt was made to open a database using a lower version than the existing version.\", version);\r\n                dbCreateError(err);\r\n                return;\r\n            }\r\n\r\n            db.transaction(function(tx) {\r\n                tx.executeSql(\"CREATE TABLE IF NOT EXISTS __sys__ (name VARCHAR(255), keyPath VARCHAR(255), autoInc BOOLEAN, indexList BLOB)\", [], function() {\r\n                    tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\r\n                        var e = idbModules.util.createEvent(\"success\");\r\n                        req.source = req.result = new idbModules.IDBDatabase(db, name, version, data);\r\n                        if (oldVersion < version) {\r\n                            // DB Upgrade in progress\r\n                            sysdb.transaction(function(systx) {\r\n                                systx.executeSql(\"UPDATE dbVersions set version = ? where name = ?\", [version, name], function() {\r\n                                    var e = idbModules.util.createEvent(\"upgradeneeded\");\r\n                                    e.oldVersion = oldVersion;\r\n                                    e.newVersion = version;\r\n                                    req.transaction = req.result.__versionTransaction = new idbModules.IDBTransaction(req.source, [], idbModules.IDBTransaction.VERSION_CHANGE);\r\n                                    req.transaction.__addToTransactionQueue(function onupgradeneeded(tx, args, success) {\r\n                                        idbModules.util.callback(\"onupgradeneeded\", req, e);\r\n                                        success();\r\n                                    });\r\n                                    req.transaction.__oncomplete = function() {\r\n                                        req.transaction = null;\r\n                                        var e = idbModules.util.createEvent(\"success\");\r\n                                        idbModules.util.callback(\"onsuccess\", req, e);\r\n                                    };\r\n                                }, dbCreateError);\r\n                            }, dbCreateError);\r\n                        } else {\r\n                            idbModules.util.callback(\"onsuccess\", req, e);\r\n                        }\r\n                    }, dbCreateError);\r\n                }, dbCreateError);\r\n            }, dbCreateError);\r\n        }\r\n\r\n        createSysDB(function() {\r\n            sysdb.transaction(function(tx) {\r\n                tx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\r\n                    if (data.rows.length === 0) {\r\n                        // Database with this name does not exist\r\n                        tx.executeSql(\"INSERT INTO dbVersions VALUES (?,?)\", [name, version || 1], function() {\r\n                            openDB(0);\r\n                        }, dbCreateError);\r\n                    } else {\r\n                        openDB(data.rows.item(0).version);\r\n                    }\r\n                }, dbCreateError);\r\n            }, dbCreateError);\r\n        }, dbCreateError);\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Deletes a database\r\n     * @param {string} name\r\n     * @returns {IDBOpenDBRequest}\r\n     */\r\n    IDBFactory.prototype.deleteDatabase = function(name) {\r\n        var req = new idbModules.IDBOpenDBRequest();\r\n        var calledDBError = false;\r\n        var version = null;\r\n\r\n        if (arguments.length === 0) {\r\n            throw new TypeError('Database name is required');\r\n        }\r\n        name = name + ''; // cast to a string\r\n\r\n        function dbError(tx, err) {\r\n            if (calledDBError) {\r\n                return;\r\n            }\r\n            err = idbModules.util.findError(arguments);\r\n            req.readyState = \"done\";\r\n            req.error = err || \"DOMError\";\r\n            var e = idbModules.util.createEvent(\"error\");\r\n            e.debug = arguments;\r\n            idbModules.util.callback(\"onerror\", req, e);\r\n            calledDBError = true;\r\n        }\r\n\r\n        function deleteFromDbVersions() {\r\n            sysdb.transaction(function(systx) {\r\n                systx.executeSql(\"DELETE FROM dbVersions where name = ? \", [name], function() {\r\n                    req.result = undefined;\r\n                    var e = idbModules.util.createEvent(\"success\");\r\n                    e.newVersion = null;\r\n                    e.oldVersion = version;\r\n                    idbModules.util.callback(\"onsuccess\", req, e);\r\n                }, dbError);\r\n            }, dbError);\r\n        }\r\n\r\n        createSysDB(function() {\r\n            sysdb.transaction(function(systx) {\r\n                systx.executeSql(\"SELECT * FROM dbVersions where name = ?\", [name], function(tx, data) {\r\n                    if (data.rows.length === 0) {\r\n                        req.result = undefined;\r\n                        var e = idbModules.util.createEvent(\"success\");\r\n                        e.newVersion = null;\r\n                        e.oldVersion = version;\r\n                        idbModules.util.callback(\"onsuccess\", req, e);\r\n                        return;\r\n                    }\r\n                    version = data.rows.item(0).version;\r\n                    var db = openDatabase(name, 1, name, DEFAULT_DB_SIZE);\r\n                    db.transaction(function(tx) {\r\n                        tx.executeSql(\"SELECT * FROM __sys__\", [], function(tx, data) {\r\n                            var tables = data.rows;\r\n                            (function deleteTables(i) {\r\n                                if (i >= tables.length) {\r\n                                    // If all tables are deleted, delete the housekeeping tables\r\n                                    tx.executeSql(\"DROP TABLE IF EXISTS __sys__\", [], function() {\r\n                                        // Finally, delete the record for this DB from sysdb\r\n                                        deleteFromDbVersions();\r\n                                    }, dbError);\r\n                                } else {\r\n                                    // Delete all tables in this database, maintained in the sys table\r\n                                    tx.executeSql(\"DROP TABLE \" + idbModules.util.quote(tables.item(i).name), [], function() {\r\n                                        deleteTables(i + 1);\r\n                                    }, function() {\r\n                                        deleteTables(i + 1);\r\n                                    });\r\n                                }\r\n                            }(0));\r\n                        }, function(e) {\r\n                            // __sysdb table does not exist, but that does not mean delete did not happen\r\n                            deleteFromDbVersions();\r\n                        });\r\n                    });\r\n                }, dbError);\r\n            }, dbError);\r\n        }, dbError);\r\n\r\n        return req;\r\n    };\r\n\r\n    /**\r\n     * Compares two keys\r\n     * @param key1\r\n     * @param key2\r\n     * @returns {number}\r\n     */\r\n    IDBFactory.prototype.cmp = function(key1, key2) {\r\n        if (arguments.length < 2) {\r\n            throw new TypeError(\"You must provide two keys to be compared\");\r\n        }\r\n\r\n        idbModules.Key.validate(key1);\r\n        idbModules.Key.validate(key2);\r\n        var encodedKey1 = idbModules.Key.encode(key1);\r\n        var encodedKey2 = idbModules.Key.encode(key2);\r\n        var result = encodedKey1 > encodedKey2 ? 1 : encodedKey1 === encodedKey2 ? 0 : -1;\r\n\r\n        if (idbModules.DEBUG) {\r\n            // verify that the keys encoded correctly\r\n            var decodedKey1 = idbModules.Key.decode(encodedKey1);\r\n            var decodedKey2 = idbModules.Key.decode(encodedKey2);\r\n            if (typeof key1 === \"object\") {\r\n                key1 = JSON.stringify(key1);\r\n                decodedKey1 = JSON.stringify(decodedKey1);\r\n            }\r\n            if (typeof key2 === \"object\") {\r\n                key2 = JSON.stringify(key2);\r\n                decodedKey2 = JSON.stringify(decodedKey2);\r\n            }\r\n\r\n            // encoding/decoding mismatches are usually due to a loss of floating-point precision\r\n            if (decodedKey1 !== key1) {\r\n                console.warn(key1 + ' was incorrectly encoded as ' + decodedKey1);\r\n            }\r\n            if (decodedKey2 !== key2) {\r\n                console.warn(key2 + ' was incorrectly encoded as ' + decodedKey2);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    };\r\n\r\n\r\n    idbModules.shimIndexedDB = new IDBFactory();\r\n    idbModules.IDBFactory = IDBFactory;\r\n}(idbModules));\r\n\r\n// To-do: Move other modules toward using ES6 modules as well\r\nvar win = typeof window === 'undefined' ? {} : window;\r\nexport default win;\r\n\r\n(function(window, idbModules){\r\n    'use strict';\r\n\r\n    if (!window) { // Mostly ignore Node here\r\n        idbModules.indexedDB = idbModules.shimIndexedDB;\r\n        return;\r\n    }\r\n\r\n    function shim(name, value) {\r\n        try {\r\n            // Try setting the property. This will fail if the property is read-only.\r\n            window[name] = value;\r\n        }\r\n        catch (e) {}\r\n\r\n        if (window[name] !== value && Object.defineProperty) {\r\n            // Setting a read-only property failed, so try re-defining the property\r\n            try {\r\n                Object.defineProperty(window, name, {\r\n                    value: value\r\n                });\r\n            }\r\n            catch (e) {}\r\n\r\n            if (window[name] !== value) {\r\n                window.console && console.warn && console.warn('Unable to shim ' + name);\r\n            }\r\n        }\r\n    }\r\n\r\n    shim('shimIndexedDB', idbModules.shimIndexedDB);\r\n    if (window.shimIndexedDB) {\r\n        window.shimIndexedDB.__useShim = function(){\r\n            if (typeof window.openDatabase !== \"undefined\") {\r\n                // Polyfill ALL of IndexedDB, using WebSQL\r\n                shim('indexedDB', idbModules.shimIndexedDB);\r\n                shim('IDBFactory', idbModules.IDBFactory);\r\n                shim('IDBDatabase', idbModules.IDBDatabase);\r\n                shim('IDBObjectStore', idbModules.IDBObjectStore);\r\n                shim('IDBIndex', idbModules.IDBIndex);\r\n                shim('IDBTransaction', idbModules.IDBTransaction);\r\n                shim('IDBCursor', idbModules.IDBCursor);\r\n                shim('IDBKeyRange', idbModules.IDBKeyRange);\r\n                shim('IDBRequest', idbModules.IDBRequest);\r\n                shim('IDBOpenDBRequest', idbModules.IDBOpenDBRequest);\r\n                shim('IDBVersionChangeEvent', idbModules.IDBVersionChangeEvent);\r\n            }\r\n            else if (typeof window.indexedDB === \"object\") {\r\n                // Polyfill the missing IndexedDB features\r\n                idbModules.polyfill();\r\n            }\r\n        };\r\n\r\n        window.shimIndexedDB.__debug = function(val){\r\n            idbModules.DEBUG = val;\r\n        };\r\n    }\r\n\r\n    // Workaround to prevent an error in Firefox\r\n    if(!('indexedDB' in window)) {\r\n        window.indexedDB = window.indexedDB || window.webkitIndexedDB || window.mozIndexedDB || window.oIndexedDB || window.msIndexedDB;\r\n    }\r\n\r\n    // Detect browsers with known IndexedDb issues (e.g. Android pre-4.4)\r\n    var poorIndexedDbSupport = false;\r\n    if (navigator.userAgent.match(/Android 2/) || navigator.userAgent.match(/Android 3/) || navigator.userAgent.match(/Android 4\\.[0-3]/)) {\r\n        /* Chrome is an exception. It supports IndexedDb */\r\n        if (!navigator.userAgent.match(/Chrome/)) {\r\n            poorIndexedDbSupport = true;\r\n        }\r\n    }\r\n\r\n    if ((typeof window.indexedDB === \"undefined\" || !window.indexedDB || poorIndexedDbSupport) && typeof window.openDatabase !== \"undefined\") {\r\n        window.shimIndexedDB.__useShim();\r\n    }\r\n    else {\r\n        window.IDBDatabase = window.IDBDatabase || window.webkitIDBDatabase;\r\n        window.IDBTransaction = window.IDBTransaction || window.webkitIDBTransaction;\r\n        window.IDBCursor = window.IDBCursor || window.webkitIDBCursor;\r\n        window.IDBKeyRange = window.IDBKeyRange || window.webkitIDBKeyRange;\r\n        if(!window.IDBTransaction){\r\n            window.IDBTransaction = {};\r\n        }\r\n        /* Some browsers (e.g. Chrome 18 on Android) support IndexedDb but do not allow writing of these properties */\r\n        try {\r\n            window.IDBTransaction.READ_ONLY = window.IDBTransaction.READ_ONLY || \"readonly\";\r\n            window.IDBTransaction.READ_WRITE = window.IDBTransaction.READ_WRITE || \"readwrite\";\r\n        } catch (e) {}\r\n    }\r\n}(win, idbModules));\r\n"]}